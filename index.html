<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-java/maven/maven-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/05/java/maven/maven-3/" class="article-date">
  <time datetime="2018-06-05T03:09:01.000Z" itemprop="datePublished">2018-06-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/maven/">maven</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/05/java/maven/maven-3/">第三章 maven拆分ssm</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="一、父工程"><a href="#一、父工程" class="headerlink" title="一、父工程"></a>一、父工程</h4><p>创建 maven project</p>
<p>打包方式 pom</p>
<p>pom.xml中定义ssm所依赖的所有jar包</p>
<p>将父工程发布到本地仓库</p>
<h4 id="二、子工程ssm-dao"><a href="#二、子工程ssm-dao" class="headerlink" title="二、子工程ssm-dao"></a>二、子工程ssm-dao</h4><p>1、创建 maven module 继承自父工程</p>
<p>2、打包方式 jar</p>
<p>3、将dao层相关的配置文件放到该工程下</p>
<ul>
<li>jdbc.properties</li>
<li>mybatis.xml</li>
<li>spring/applicationContext-basic.xml</li>
<li>spring/applicationContext-dao.xml</li>
</ul>
<p>applicationContext-basic.xml注册数据源、sqlSessionFactory以及事务</p>
<p>applicationContext-dao.xml生成dao的代理对象</p>
<p>4、将dao层相关的代码放到该工程下</p>
<ul>
<li>beans</li>
<li>dao</li>
</ul>
<p>5、发布工程到本地仓库供子工程ssm-service依赖</p>
<h4 id="三、子工程ssm-service"><a href="#三、子工程ssm-service" class="headerlink" title="三、子工程ssm-service"></a>三、子工程ssm-service</h4><p>1、创建 maven module 继承自父工程</p>
<p>2、打包方式 jar</p>
<p>3、将service层相关的配置文件放到该工程下</p>
<ul>
<li>spring/applicationContext-service.xml</li>
</ul>
<p>4、将service层相关的代码放到该工程下</p>
<ul>
<li>service接口及实现类</li>
</ul>
<p>5、发布工程到本地仓库供子工程ssm-web依赖</p>
<h4 id="四、子工程ssm-web"><a href="#四、子工程ssm-web" class="headerlink" title="四、子工程ssm-web"></a>四、子工程ssm-web</h4><p>1、创建 maven-module 继承自父工程</p>
<p>2、打包方式 war</p>
<p>3、将web层相关的配置文件放到该工程下</p>
<ul>
<li>spring/applicationContext-web.xml(注册处理器)</li>
</ul>
<p>4、将web层相关的代码放到该工程下</p>
<ul>
<li>处理器</li>
</ul>
<p>5、web.xml</p>
<pre><code>&lt;context-param&gt;
    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
    &lt;param-value&gt;classpath*:spring/applicationContext-*.xml&lt;/param-value&gt;
&lt;/context-param&gt;
</code></pre><p>classpath<em>:指的是除了加载本项目下的spring/applicationContext-</em>.xml配置文件，也加载所依赖的jar包下的spring/applicationContext-*.xml配置文件。这样就能将dao层与service层的spring配置文件也加载进来。</p>
<h4 id="五、测试"><a href="#五、测试" class="headerlink" title="五、测试"></a>五、测试</h4><p>1、测试dao层</p>
<pre><code>@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(&quot;classpath:spring/applicationContext-*.xml&quot;)
public class IStudentDaoTest {

    @Autowired
    private IStudentDao studentDao;

    @Test
    public void test() {
        //fail(&quot;Not yet implemented&quot;);
        studentDao.insertStudent(new Student(&quot;zhangsan&quot;,22));
    }

}
</code></pre><p>2、测试service层</p>
<pre><code>public class IStudentServiceTest {

    @Test
    public void testAddStudent() {

        ClassPathXmlApplicationContext classPathXmlApplicationContext = new ClassPathXmlApplicationContext(&quot;classpath*:spring/applicationContext-*.xml&quot;);
        IStudentService service = (IStudentService)classPathXmlApplicationContext.getBean(&quot;studentService&quot;);
        service.addStudent(new Student(&quot;lisi&quot;,23));
    }

}
</code></pre><h4 id="六、maven运行方式-comcat-run"><a href="#六、maven运行方式-comcat-run" class="headerlink" title="六、maven运行方式 comcat:run"></a>六、maven运行方式 comcat:run</h4><p>1、运行父工程 </p>
<p>父工程将各个子模块聚合到一起，将ssm-web打成war包发布到tomcat。</p>
<p>2、运行ssm-web工程</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/05/java/maven/maven-3/" data-id="cji15cntk004vu0fyhiknn99t" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java/maven/maven-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/03/java/maven/maven-2/" class="article-date">
  <time datetime="2018-06-03T03:48:47.000Z" itemprop="datePublished">2018-06-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/maven/">maven</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/03/java/maven/maven-2/">第二章 maven整合smm</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="一、创建maven-project"><a href="#一、创建maven-project" class="headerlink" title="一、创建maven project"></a>一、创建maven project</h4><p>1、创建maven project</p>
<p>配置安装目录：</p>
<p>preferences/maven/installations/add maven根目录</p>
<p>preferences/maven/user settings settings.xml目录</p>
<p>构建索引</p>
<p>windows/show view/others/maven/local repository</p>
<p>2、修正错误</p>
<p>补充web.xml文件</p>
<p>pom.xml中指定编译版本</p>
<h4 id="二、搭建环境"><a href="#二、搭建环境" class="headerlink" title="二、搭建环境"></a>二、搭建环境</h4><p>1、pom.xml添加依赖</p>
<p>2、搭建springmvc环境</p>
<p>web.xml</p>
<ul>
<li><p>注册字符编码过滤器</p>
</li>
<li><p>注册中央调度器</p>
</li>
</ul>
<p>3、搭建spring环境</p>
<p>web.xml</p>
<ul>
<li>注册ServletContext监听器</li>
</ul>
<p>监听器默认加载WEB-INF/applicationContext.xml</p>
<ul>
<li>指定spring配置文件位置classpath</li>
</ul>
<p>4、搭建mybatis环境</p>
<ul>
<li>mybatis核心配置文件</li>
</ul>
<p>5、spring与springmvc整合</p>
<p>spring配置文件中，注册处理器</p>
<p>6、spring与mybatis整合</p>
<ul>
<li><p>注册数据源dataSource</p>
</li>
<li><p>注册SessionFactory</p>
</li>
<li><p>注册事务管理</p>
</li>
<li><p>生成Dao代理对象</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/03/java/maven/maven-2/" data-id="cji15cnti004ru0fy1n88p6q4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java/maven/maven-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/01/java/maven/maven-1/" class="article-date">
  <time datetime="2018-06-01T08:52:37.000Z" itemprop="datePublished">2018-06-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/maven/">maven</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/01/java/maven/maven-1/">第一章 maven管理工具</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-1-maven的核心"><a href="#1-1-maven的核心" class="headerlink" title="1.1 maven的核心"></a>1.1 maven的核心</h4><p>依赖管理：对jar包统一管理</p>
<p>项目构建：对项目进行编译，测试，打包，部署</p>
<h4 id="1-2-maven安装"><a href="#1-2-maven安装" class="headerlink" title="1.2 maven安装"></a>1.2 maven安装</h4><p>maven程序是java工发的，它的运行依赖jkd。</p>
<h5 id="1、maven下载：-http-maven-apache-org-download-cgi"><a href="#1、maven下载：-http-maven-apache-org-download-cgi" class="headerlink" title="1、maven下载： http://maven.apache.org/download.cgi"></a>1、maven下载： <a href="http://maven.apache.org/download.cgi" target="_blank" rel="external">http://maven.apache.org/download.cgi</a></h5><h5 id="2、配置环境变量"><a href="#2、配置环境变量" class="headerlink" title="2、配置环境变量"></a>2、配置环境变量</h5><p>（1）、看看~/下是否有.bash_profile文件，如果没有就创建一个，环境变量要配置在这个文件中。</p>
<p>创建文件：</p>
<pre><code>touch ~/.bash_profile 
</code></pre><p>（2）、编辑bash_profile文件：</p>
<pre><code>vi ~/.bash_profile  
</code></pre><p>（3）、配置如下四个环境变量：</p>
<pre><code># maven所在的目录  
export M2_HOME=/Users/haojie/Downloads/Java/maven/apache-maven-3.3.9  
# maven bin所在的目录  
export M2=$M2_HOME/bin  
# 将maven bin加到PATH变量中  
export PATH=$M2:$PATH  
# 配置JAVA_HOME所在的目录，注意这个目录下应该有bin文件夹，bin下应该有java等命令  
JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_151.jdk/Contents/Home
export JAVA_HOME  
</code></pre><p>（4）、在终端执行强制生效命令</p>
<pre><code>source ~/.bash_profile  
</code></pre><p>（5）、在新的命令行窗口执行mvn -v，如果正常显示了maven的版本等信息，就是配置成功了。</p>
<h4 id="1-3-配置本地仓库"><a href="#1-3-配置本地仓库" class="headerlink" title="1.3 配置本地仓库"></a>1.3 配置本地仓库</h4><p>/conf/settings.xml</p>
<pre><code>&lt;localRepository&gt;/Users/haojie/Downloads/Java/maven/maven_repository/&lt;/localRepository&gt;
</code></pre><h4 id="1-4-maven的常用命令"><a href="#1-4-maven的常用命令" class="headerlink" title="1.4 maven的常用命令"></a>1.4 maven的常用命令</h4><ul>
<li>clean:清理</li>
</ul>
<p>将项目根目录下target目录清理掉</p>
<ul>
<li>compile:编译</li>
</ul>
<p>将于项目中.java文件编译为.class文件</p>
<ul>
<li>test:测试</li>
</ul>
<p>单元测试类名有要求：XxxxTest.java</p>
<p>将项目根目录下src/test/java目录下的单元测试类全部执行</p>
<ul>
<li>package:打包</li>
</ul>
<p>将项目打包到根目录下target目录</p>
<ul>
<li>install:安装</li>
</ul>
<p>打包jar包到本地仓库</p>
<h4 id="1-5-maven生命周期"><a href="#1-5-maven生命周期" class="headerlink" title="1.5 maven生命周期"></a>1.5 maven生命周期</h4><p>在maven中存在三套生命周期，每一套生命周期相互独立，互不影响</p>
<p>1、CleanLifeCycle:清理生命周期</p>
<ul>
<li>clean</li>
</ul>
<p>2、defaultLifeCycle:默认生命周期</p>
<ul>
<li>compile,test,package,install,deploy</li>
</ul>
<p>3、siteLifeCycle：站点生命周期</p>
<ul>
<li>site</li>
</ul>
<p>在一套生命周期内，执行后面的命令，前面操作会自动执行。</p>
<h4 id="1-6-在eclipse中配置maven插件"><a href="#1-6-在eclipse中配置maven插件" class="headerlink" title="1.6 在eclipse中配置maven插件"></a>1.6 在eclipse中配置maven插件</h4><p>1、Preferences/Maven/Installations/add</p>
<p>添加maven程序</p>
<p>2、Preferences/Maven/User Settings </p>
<p>添加maven settins.xml文件</p>
<p>3、window/show view/other/maven</p>
<p>右键Local Repository(….)/rebuild index构建索引</p>
<h4 id="1-7-依赖范围"><a href="#1-7-依赖范围" class="headerlink" title="1.7 依赖范围"></a>1.7 依赖范围</h4><p>添加依赖范围：默认是compile</p>
<p>如果将servlet-api设置为compile，打包后包含servlet-api.jar，部署到tomcat后，跟tomcat中存在的servlet-api.jar包冲突，会导致运行失败。</p>
<p>因此，如果使用到tomcat自带jar包，需要将项目中依赖作用范围设置为:provided。</p>
<h4 id="1-8-传递依赖冲突解决"><a href="#1-8-传递依赖冲突解决" class="headerlink" title="1.8 传递依赖冲突解决"></a>1.8 传递依赖冲突解决</h4><h5 id="1-8-1-maven自己调解原则"><a href="#1-8-1-maven自己调解原则" class="headerlink" title="1.8.1 maven自己调解原则"></a>1.8.1 maven自己调解原则</h5><ul>
<li>第一声明者优先原则</li>
</ul>
<p>谁先定义的就用谁的传递依赖</p>
<ul>
<li>路径近者优先原则</li>
</ul>
<p>直接依赖级别高于传递依赖</p>
<h5 id="1-8-2-排除依赖"><a href="#1-8-2-排除依赖" class="headerlink" title="1.8.2 排除依赖"></a>1.8.2 排除依赖</h5><p>排除掉冲突中的某一个依赖</p>
<h5 id="1-8-3-版本锁定"><a href="#1-8-3-版本锁定" class="headerlink" title="1.8.3 版本锁定"></a>1.8.3 版本锁定</h5><pre><code>&lt;dependencyManagement&gt;
    &lt;dependency&gt;
        ...        
    &lt;/dependency&gt;
&lt;/dependencyManagement&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/01/java/maven/maven-1/" data-id="cji15cnte004nu0fygp6jke1v" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java/ssm/ssm-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/26/java/ssm/ssm-1/" class="article-date">
  <time datetime="2018-05-26T08:45:17.000Z" itemprop="datePublished">2018-05-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ssm/">ssm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/26/java/ssm/ssm-1/">第一章 搭建SSM开发环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-1-导入Jar包"><a href="#1-1-导入Jar包" class="headerlink" title="1.1 导入Jar包"></a>1.1 导入Jar包</h4><p>（1）、mybatis的jar包</p>
<ul>
<li>asm-4.2.jar</li>
<li>cglib-3.1.jar</li>
<li>commons-logging-1.2.jar</li>
<li>log4j-1.2.17.jar</li>
<li>log4j-api-2.2.jar</li>
<li>log4j-core-2.2.jar</li>
<li>mybatis-3.3.0.jar</li>
<li>slf4j-api-1.7.12.jar</li>
<li>slf4j-log4j12-1.7.12.jar</li>
</ul>
<p>（2）、ehcache的Jar包</p>
<ul>
<li>ehcache-core-2.6.8.jar</li>
<li>mybatis-ehcache-1.0.3.jar</li>
</ul>
<p>（3）、Spring的Jar包</p>
<ul>
<li>com.springsource.org.aopalliance-1.0.0.jar</li>
<li>com.springsource.org.aspectj.weaver-1.6.8.RELEASE.jar</li>
<li>spring-aop-4.2.1.RELEASE.jar</li>
<li>spring-aspects-4.2.1.RELEASE.jar</li>
<li>spring-beans-4.2.1.RELEASE.jar</li>
<li>spring-context-4.2.1.RELEASE.jar</li>
<li>spring-context-support-4.2.1.RELEASE.jar</li>
<li>spring-core-4.2.1.RELEASE.jar</li>
<li>spring-expression-4.2.1.RELEASE.jar</li>
<li>spring-jdbc-4.2.1.RELEASE.jar</li>
<li>spring-orm-4.2.1.RELEASE.jar</li>
<li>spring-tx-4.2.1.RELEASE.jar</li>
<li>spring-web-4.2.1.RELEASE.jar</li>
<li>spring-webmvc-4.2.1.RELEASE.jar</li>
</ul>
<p>（4）、mybatis与spring整合的Jar包</p>
<ul>
<li>mybatis-spring-1.2.3.jar</li>
</ul>
<p>（5）、JSON的Jar包</p>
<ul>
<li><p>commons-beanutils-1.8.0.jar</p>
</li>
<li><p>commons-collections-3.2.1.jar</p>
</li>
<li><p>commons-lang-2.5.jar</p>
</li>
<li><p>commons-logging-1.1.1.jar</p>
</li>
<li><p>ezmorph-1.0.6.jar</p>
</li>
<li><p>json-lib-2.4-jdk15.jar</p>
</li>
</ul>
<p>（6）、Jackson的Jar包</p>
<ul>
<li><p>jackson-annotations-2.6.0-xh.jar</p>
</li>
<li><p>jackson-core-2.6.0-xh.jar</p>
</li>
<li><p>jackson-databind-2.6.0-xh.jar</p>
</li>
<li><p>jackson-jr-all-2.4.3-xh.jar</p>
</li>
</ul>
<p>（7）、Hebernate验证器Jar包</p>
<ul>
<li><p>hibernate-validator-5.1.0.Final.jar</p>
</li>
<li><p>jboss-logging-3.1.3.GA.jar</p>
</li>
<li><p>validation-api-1.1.0.Final.jar</p>
</li>
</ul>
<p>（8）、其它Jar包</p>
<ul>
<li><p>mysql-connector-java-5.1.44-bin.jar</p>
</li>
<li><p>c3p0-0.9.2.1</p>
</li>
<li><p>c3p0-oracle-thin-extras-0.9.2.1</p>
</li>
<li><p>mchange-commons-java-0.2.3.4</p>
</li>
</ul>
<h4 id="1-2-配置式开发"><a href="#1-2-配置式开发" class="headerlink" title="1.2 配置式开发"></a>1.2 配置式开发</h4><h5 id="1-2-1-定义实体类及DB表"><a href="#1-2-1-定义实体类及DB表" class="headerlink" title="1.2.1 定义实体类及DB表"></a>1.2.1 定义实体类及DB表</h5><p>package com.bjpowernode.beans;</p>
<p>public class Student {<br>    private Integer id;<br>    private String name;<br>    private int age;</p>
<pre><code>public Student() {
    super();
    // TODO Auto-generated constructor stub
}

public Student(String name, int age) {
    super();
    this.name = name;
    this.age = age;
}
...
getter and setter
...
</code></pre><p>}</p>
<h5 id="1-2-2-定义表单页及处理器"><a href="#1-2-2-定义表单页及处理器" class="headerlink" title="1.2.2 定义表单页及处理器"></a>1.2.2 定义表单页及处理器</h5><p>index.jsp</p>
<pre><code>&lt;form action=&quot;${pageContext.request.contextPath }/test/register.do&quot; method=&quot;POST&quot;&gt;
    姓名：&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;br /&gt;
    年龄：&lt;input type=&quot;text&quot; name=&quot;age&quot; /&gt;&lt;br /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;注册&quot; /&gt;
&lt;/form&gt;
</code></pre><p>StudentController</p>
<pre><code>package com.bjpowernode.handlers;

public class StudentController implements Controller {

    private IStudentService service;

    public void setService(IStudentService service) {
        this.service = service;
    }

    @Override
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {

        String name = request.getParameter(&quot;name&quot;);
        String ageStr = request.getParameter(&quot;age&quot;);
        Integer age = Integer.valueOf(ageStr);
        Student student = new Student(name,age);

        service.addStudent(student);

        return new ModelAndView(&quot;/welcome.jsp&quot;);
    }

}
</code></pre><h5 id="1-2-3-定义service"><a href="#1-2-3-定义service" class="headerlink" title="1.2.3 定义service"></a>1.2.3 定义service</h5><p>service interface</p>
<pre><code>package com.bjpowernode.service;
public interface IStudentService {    
    void addStudent(Student student);
}
</code></pre><p>service implements</p>
<pre><code>package com.bjpowernode.service;
public class StudentServiceImpl implements IStudentService {

    private IStudentDao dao;

    public void setDao(IStudentDao dao) {
        this.dao = dao;
    }

    @Override
    public void addStudent(Student student) {
        dao.insertStudent(student);
    }

}
</code></pre><h5 id="1-2-4-定义dao"><a href="#1-2-4-定义dao" class="headerlink" title="1.2.4 定义dao"></a>1.2.4 定义dao</h5><p>dao interface</p>
<pre><code>package com.bjpowernode.dao;
public interface IStudentDao {    
    void insertStudent(Student student);
}
</code></pre><h5 id="1-2-5-定义mybatis两个配置文件"><a href="#1-2-5-定义mybatis两个配置文件" class="headerlink" title="1.2.5 定义mybatis两个配置文件"></a>1.2.5 定义mybatis两个配置文件</h5><p>mybatis主配置文件：mybatis.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; 
&lt;!DOCTYPE configuration
PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;

&lt;configuration&gt;
    &lt;!-- 为实体类指定别名，简单类名 --&gt;
    &lt;typeAliases&gt;
        &lt;package name=&quot;com.bjpowernode.beans&quot;/&gt;
    &lt;/typeAliases&gt;
    &lt;!-- 注册映射文件 --&gt;
    &lt;mappers&gt;
        &lt;package name=&quot;com.bjpowernode.dao&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre><p>IStudentDao.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; 
&lt;!DOCTYPE mapper
PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;

&lt;mapper namespace=&quot;com.bjpowernode.dao.IStudentDao&quot;&gt;
    &lt;insert id=&quot;insertStudent&quot;&gt;
        insert into student(name,age) values(#{name},#{age})
    &lt;/insert&gt;
&lt;/mapper&gt;
</code></pre><h5 id="1-2-6-注册数据源"><a href="#1-2-6-注册数据源" class="headerlink" title="1.2.6 注册数据源"></a>1.2.6 注册数据源</h5><p>jdbc.properties</p>
<pre><code>jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql:///mydatabase
jdbc.user=root
jdbc.password=haojie_123456
</code></pre><p>spring-db.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;!-- 注册c3p0数据源 --&gt;
    &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
        &lt;property name=&quot;driverClass&quot; value=&quot;${jdbc.driver}&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;jdbcUrl&quot; value=&quot;${jdbc.url}&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;user&quot; value=&quot;${jdbc.user}&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!-- 注册属性文件 --&gt;
    &lt;context:property-placeholder location=&quot;classpath:resources/jdbc.properties&quot; /&gt;

&lt;/beans&gt;
</code></pre><h5 id="1-2-7-生成Dao的代理对象"><a href="#1-2-7-生成Dao的代理对象" class="headerlink" title="1.2.7 生成Dao的代理对象"></a>1.2.7 生成Dao的代理对象</h5><p>spring-mybatis.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;!-- 注册sqlSessionFactory --&gt;
    &lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
        &lt;property name=&quot;configLocation&quot; value=&quot;classpath:resources/mybatis.xml&quot;&gt;&lt;/property&gt;        
        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!-- 生成Dao的代理对象 --&gt;
    &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;
        &lt;property name=&quot;sqlSessionFactoryBeanName&quot; value=&quot;sqlSessionFactory&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;basePackage&quot; value=&quot;com.bjpowernode.dao&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</code></pre><h5 id="1-2-8-注册service"><a href="#1-2-8-注册service" class="headerlink" title="1.2.8 注册service"></a>1.2.8 注册service</h5><p>spring-service.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;bean id=&quot;studentService&quot; class=&quot;com.bjpowernode.service.StudentServiceImpl&quot;&gt;
        &lt;property name=&quot;dao&quot; ref=&quot;IStudentDao&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</code></pre><h5 id="1-2-9-注册springmvc处理器"><a href="#1-2-9-注册springmvc处理器" class="headerlink" title="1.2.9 注册springmvc处理器"></a>1.2.9 注册springmvc处理器</h5><p>spring-mvc.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;!-- 注册处理器 --&gt;
    &lt;bean id=&quot;/test/register.do&quot; class=&quot;com.bjpowernode.handlers.StudentController&quot;&gt;
        &lt;property name=&quot;service&quot; ref=&quot;studentService&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

&lt;/beans&gt; 
</code></pre><h5 id="1-2-10-配置spring事务"><a href="#1-2-10-配置spring事务" class="headerlink" title="1.2.10 配置spring事务"></a>1.2.10 配置spring事务</h5><p>spring-tx.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;!-- 注册事务管理器 --&gt;
    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!-- 注册事务通知 --&gt;
    &lt;tx:advice id=&quot;txAdvice&quot;&gt;
        &lt;tx:attributes&gt;
            &lt;tx:method name=&quot;add*&quot; isolation=&quot;DEFAULT&quot; propagation=&quot;REQUIRED&quot;/&gt;
        &lt;/tx:attributes&gt;
    &lt;/tx:advice&gt;

    &lt;!-- AOP配置 --&gt;
    &lt;aop:config&gt;
        &lt;aop:pointcut expression=&quot;execution(* *..service.*.*(..))&quot; id=&quot;studentPointcut&quot;/&gt;
        &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;studentPointcut&quot;/&gt;
    &lt;/aop:config&gt;

&lt;/beans&gt;
</code></pre><h4 id="1-3-注解式开发"><a href="#1-3-注解式开发" class="headerlink" title="1.3 注解式开发"></a>1.3 注解式开发</h4><h4 id="1-3-1-将springmvc改为注解"><a href="#1-3-1-将springmvc改为注解" class="headerlink" title="1.3.1 将springmvc改为注解"></a>1.3.1 将springmvc改为注解</h4><p>springmvc.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;!-- 注册处理器 --&gt;
    &lt;!-- 
    &lt;bean id=&quot;/test/register.do&quot; class=&quot;com.bjpowernode.handlers.StudentController&quot;&gt;
        &lt;property name=&quot;service&quot; ref=&quot;studentService&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
     --&gt;

     &lt;!-- 注册组件扫描器 --&gt;
     &lt;context:component-scan base-package=&quot;com.bjpowernode.handlers&quot;&gt;&lt;/context:component-scan&gt;

&lt;/beans&gt;
</code></pre><p>StudentController</p>
<ul>
<li><p>请求路径</p>
</li>
<li><p>处理器</p>
</li>
<li><p>依赖注入</p>
</li>
</ul>
<p>============</p>
<pre><code>package com.bjpowernode.handlers;

@Controller
@RequestMapping(&quot;/test&quot;)
public class StudentController {

    @Autowired
    @Qualifier(&quot;studentService&quot;)
    //@Resource(name=&quot;studentService&quot;)
    private IStudentService service;

    public void setService(IStudentService service) {
        this.service = service;
    }

    @RequestMapping(&quot;/register.do&quot;)
    public ModelAndView doRegister(String name, int age) {

        Student student = new Student(name,age);

        service.addStudent(student);

        return new ModelAndView(&quot;/welcome.jsp&quot;);
    }
}
</code></pre><h4 id="1-3-2-将spring改为注解"><a href="#1-3-2-将spring改为注解" class="headerlink" title="1.3.2 将spring改为注解"></a>1.3.2 将spring改为注解</h4><p>spring-service.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;
    &lt;!-- 
    &lt;bean id=&quot;studentService&quot; class=&quot;com.bjpowernode.service.StudentServiceImpl&quot;&gt;
        &lt;property name=&quot;dao&quot; ref=&quot;IStudentDao&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    --&gt;

    &lt;!-- 注册组件扫描器 --&gt;
    &lt;context:component-scan base-package=&quot;com.bjpowernode.service&quot;&gt;&lt;/context:component-scan&gt; 

&lt;/beans&gt;
</code></pre><p>student service implements</p>
<pre><code>package com.bjpowernode.service;

@Service(&quot;studentService&quot;)
public class StudentServiceImpl implements IStudentService {

    @Resource(name=&quot;IStudentDao&quot;)
    private IStudentDao dao;

    public void setDao(IStudentDao dao) {
        this.dao = dao;
    }

    @Override
    @Transactional
    public void addStudent(Student student) {
        dao.insertStudent(student);
    }

}
</code></pre><p>spring-tx.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;!-- 注册事务管理器 --&gt;
    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!--  
    注册事务通知
    &lt;tx:advice id=&quot;txAdvice&quot;&gt;
        &lt;tx:attributes&gt;
            &lt;tx:method name=&quot;add*&quot; isolation=&quot;DEFAULT&quot; propagation=&quot;REQUIRED&quot;/&gt;
        &lt;/tx:attributes&gt;
    &lt;/tx:advice&gt;

    AOP配置
    &lt;aop:config&gt;
        &lt;aop:pointcut expression=&quot;execution(* *..service.*.*(..))&quot; id=&quot;studentPointcut&quot;/&gt;
        &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;studentPointcut&quot;/&gt;
    &lt;/aop:config&gt;
    --&gt;

    &lt;!-- 注册事务驱动 --&gt;
    &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; /&gt;

&lt;/beans&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/26/java/ssm/ssm-1/" data-id="cji15cnvh0074u0fypldx34gr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ssm/">ssm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java/springmvc/springmvc-4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/24/java/springmvc/springmvc-4/" class="article-date">
  <time datetime="2018-05-24T07:59:14.000Z" itemprop="datePublished">2018-05-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/springmvc/">springmvc</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/24/java/springmvc/springmvc-4/">第四章 springmvc核心技术</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="4-1-请求转发与重定向"><a href="#4-1-请求转发与重定向" class="headerlink" title="4.1 请求转发与重定向"></a>4.1 请求转发与重定向</h4><p>当处理器对请求处理完毕后，向其它资源进行跳转时，有两种跳转方式：请求转发与重定向。而根据所要跳转的资源类型，又可分为两类：跳转到其它页面与跳转到其它处理器。</p>
<p>注意，对于请求转发的页面，可以是WEB-INF中的页面；而重定向的页面，不能是WEB-INF中的页面。因为重定向相当于用户再次发出一次请求，而用户是不能直接访问WEB-INF中的资源的。</p>
<h5 id="4-1-1-返回ModelAndView时的请求转发"><a href="#4-1-1-返回ModelAndView时的请求转发" class="headerlink" title="4.1.1 返回ModelAndView时的请求转发"></a>4.1.1 返回ModelAndView时的请求转发</h5><p>（1）、请求转发到页面</p>
<p>（2）、请求转发到Controller</p>
<h5 id="4-1-2-返回ModelAndView时的重定向"><a href="#4-1-2-返回ModelAndView时的重定向" class="headerlink" title="4.1.2 返回ModelAndView时的重定向"></a>4.1.2 返回ModelAndView时的重定向</h5><p>（1）、重定向到页面</p>
<p>A、通过ModelAndView的Model携带参数</p>
<p>index.jsp</p>
<pre><code>&lt;form action=&quot;${pageContext.request.contextPath }/test/register.do&quot; method=&quot;POST&quot;&gt;
    姓名：&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;br /&gt;
    年龄：&lt;input type=&quot;text&quot; name=&quot;age&quot; /&gt;&lt;br /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;注册&quot; /&gt;
&lt;/form&gt;
</code></pre><p>处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {

    @RequestMapping(&quot;/register.do&quot;)
    public ModelAndView doSecond(String name, int age) {
        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;name&quot;, name);
        mv.addObject(&quot;age&quot;, age);
        mv.setViewName(&quot;redirect:/welcome.jsp&quot;);
        return mv;
    }
}
</code></pre><p>跳转到welcome.jsp页面获取接收参数</p>
<pre><code>&lt;!-- 
param.name底层执行的是request.getParameter(&quot;name&quot;) 
requestScope.name底层执行的是request.getAttribute(&quot;name&quot;)
--&gt;
name = ${param.name}
&lt;br/&gt;
age = ${param.age}
</code></pre><p>B、通过HttpSession携带参数</p>
<p>（2）、重定向到Controller</p>
<p>A、通过ModelAndView的Model携带参数</p>
<p>B、通过HttpSession携带参数</p>
<h5 id="4-1-3-返回String时的请求转发"><a href="#4-1-3-返回String时的请求转发" class="headerlink" title="4.1.3 返回String时的请求转发"></a>4.1.3 返回String时的请求转发</h5><p>（1）、请求转发到页面</p>
<p>（2）、请求转发到Controller</p>
<h5 id="4-1-4-返回String时的重定向"><a href="#4-1-4-返回String时的重定向" class="headerlink" title="4.1.4 返回String时的重定向"></a>4.1.4 返回String时的重定向</h5><p>（1）、重定向到页面</p>
<p>（2）、重定向到Controller</p>
<p>index.jsp</p>
<pre><code>&lt;form action=&quot;${pageContext.request.contextPath }/test/register.do&quot; method=&quot;POST&quot;&gt;
    姓名：&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;br /&gt;
    年龄：&lt;input type=&quot;text&quot; name=&quot;age&quot; /&gt;&lt;br /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;注册&quot; /&gt;
&lt;/form&gt;
</code></pre><p>处理器    </p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {

    @RequestMapping(&quot;/register.do&quot;)
    public String doRegister(String name, int age, Model model) {
        model.addAttribute(&quot;name&quot;,name);
        model.addAttribute(&quot;age&quot;,age);

        return &quot;redirect:other.do&quot;;
    }

    @RequestMapping(&quot;/other.do&quot;)
    public String doOther(String name,int age) {
        System.out.println(&quot;name = &quot; + name);
        System.out.println(&quot;age = &quot; + age);
        return &quot;/welcome.jsp&quot;;
    }
}
</code></pre><p>跳转到welcome.jsp页面获取接收参数</p>
<pre><code>&lt;!-- 
param.name底层执行的是request.getParameter(&quot;name&quot;) 
requestScope.name底层执行的是request.getAttribute(&quot;name&quot;)
--&gt;
name = ${param.name}
&lt;br/&gt;
age = ${param.age}
</code></pre><h5 id="4-1-5-返回void时的请求转发"><a href="#4-1-5-返回void时的请求转发" class="headerlink" title="4.1.5 返回void时的请求转发"></a>4.1.5 返回void时的请求转发</h5><p>（1）、请求转发到页面</p>
<p>（2）、请求转发到Controller</p>
<h5 id="4-1-6-返回void时的重定向"><a href="#4-1-6-返回void时的重定向" class="headerlink" title="4.1.6 返回void时的重定向"></a>4.1.6 返回void时的重定向</h5><p>（1）、重定向到页面</p>
<p>（2）、重定向到Controller</p>
<h4 id="4-2-异常处理"><a href="#4-2-异常处理" class="headerlink" title="4.2 异常处理"></a>4.2 异常处理</h4><p> 常用的springmvc异常处理方式主要有三种：</p>
<ul>
<li><p>使用系统定义好的异常处理器SimpleMappingExceptionResolver</p>
</li>
<li><p>使用自定义异常处理器</p>
</li>
<li><p>使用异常处理注解</p>
</li>
</ul>
<h5 id="4-2-1-SimpleMappingExceptionResolver异常处理器"><a href="#4-2-1-SimpleMappingExceptionResolver异常处理器" class="headerlink" title="4.2.1 SimpleMappingExceptionResolver异常处理器"></a>4.2.1 SimpleMappingExceptionResolver异常处理器</h5><p>springmvc.xml</p>
<pre><code>&lt;context:component-scan base-package=&quot;com.bjpowernode.handlers&quot;&gt;&lt;/context:component-scan&gt;

&lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;&gt;
    &lt;property name=&quot;defaultErrorView&quot; value=&quot;/errors/error.jsp&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;exceptionAttribute&quot; value=&quot;ex&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;exceptionMappings&quot;&gt;
        &lt;props&gt;
            &lt;prop key=&quot;com.bjpowernode.exceptions.NameException&quot;&gt;/errors/nameError.jsp&lt;/prop&gt;
            &lt;prop key=&quot;com.bjpowernode.exceptions.AgeException&quot;&gt;/errors/ageError.jsp&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</code></pre><p>StudentException.class</p>
<pre><code>public class StudentException extends Exception {

    public StudentException() {
        super();
    }

    public StudentException(String message) {
        super(message);
    }

}
</code></pre><p>NameException.class</p>
<pre><code>public class NameException extends StudentException {

    public NameException() {
        super();
    }

    public NameException(String message) {
        super(message);
    }

}
</code></pre><p>AgeException.class</p>
<pre><code>public class AgeException extends StudentException {

    public AgeException() {
        super();
    }

    public AgeException(String message) {
        super(message);
    }

}
</code></pre><p>处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {

    @RequestMapping(&quot;/register.do&quot;)
    public ModelAndView doRegister(String name, int age) {

        int i = 3/0;

        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;name&quot;, name);
        mv.addObject(&quot;age&quot;, age);
        mv.setViewName(&quot;welcom.jsp&quot;);
        return mv;
    }

}
</code></pre><p>error.jsp</p>
<pre><code>&lt;body&gt;
    error page.&lt;br /&gt;
    ${ex.message}
&lt;/body&gt;
</code></pre><p>nameError.jsp</p>
<pre><code>name error page.
&lt;br&gt;
${ex.message}
</code></pre><p>ageError.jsp</p>
<pre><code>age error page.
&lt;br&gt;
${ex.message}
</code></pre><h5 id="4-2-2-自定义异常处理器"><a href="#4-2-2-自定义异常处理器" class="headerlink" title="4.2.2 自定义异常处理器"></a>4.2.2 自定义异常处理器</h5><p>使用springmvc定义好的SimpleMappingExceptionResolver异常处理器，可以实现生指定异常后的跳转。但若要想实现在捕捉到异常时，进行一些操作，它是完成不了的。此时，就需要使用自定义异常。</p>
<p>自定义异常处理器，需要实现HandlerExceptionResolver接口，并且该类需要在springmvc配置文件中进行注册。</p>
<p>自定义异常处理器</p>
<pre><code>public class MyHandlerExceptionResolver implements HandlerExceptionResolver {

    @Override
    public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler,
            Exception ex) {
        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;ex&quot;, ex);

        mv.setViewName(&quot;/errors/error.jsp&quot;);

        if(ex instanceof NameException) {
            mv.setViewName(&quot;/errors/nameError.jsp&quot;);
        }

        if(ex instanceof AgeException) {
            mv.setViewName(&quot;/errors/ageError.jsp&quot;);
        }

        return mv;
    }

}
</code></pre><p>springmvc.xml 注册</p>
<pre><code>&lt;!-- 注册自定义异常处理器 --&gt;
&lt;bean class=&quot;com.bjpowernode.resolvers.MyHandlerExceptionResolver&quot;&gt;&lt;/bean&gt;
</code></pre><h5 id="4-2-3-异常处理器注解-ExceptionHandler"><a href="#4-2-3-异常处理器注解-ExceptionHandler" class="headerlink" title="4.2.3 异常处理器注解@ExceptionHandler"></a>4.2.3 异常处理器注解@ExceptionHandler</h5><p>定义异常处理器</p>
<pre><code>@org.springframework.stereotype.Controller
public class BaseController {

    @ExceptionHandler(NameException.class)
    public ModelAndView handlerNameException(Exception ex) {
        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;ex&quot;, ex);
        mv.setViewName(&quot;/errors/nameError.jsp&quot;);
        return mv;
    }

    @ExceptionHandler(AgeException.class)
    public ModelAndView handlerAgeException(Exception ex) {
        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;ex&quot;, ex);
        mv.setViewName(&quot;/errors/ageError.jsp&quot;);
        return mv;
    }

    @ExceptionHandler
    public ModelAndView handlerException(Exception ex) {
        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;ex&quot;, ex);
        mv.setViewName(&quot;/errors/error.jsp&quot;);
        return mv;
    }

}
</code></pre><p>处理器继承异常处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController extends BaseController {

    @RequestMapping(&quot;/register.do&quot;)
    public ModelAndView doRegister(String name, int age) throws StudentException {

        if(!&quot;beijing&quot;.equals(name)) {
            throw new NameException(&quot;用户名不正确&quot;);
        }

        if(age &gt; 60) {
            throw new AgeException(&quot;年龄太大了&quot;);
        }

        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;name&quot;, name);
        mv.addObject(&quot;age&quot;, age);
        mv.setViewName(&quot;/welcome.jsp&quot;);
        return mv;
    }

}
</code></pre><h4 id="4-3-类型转换器和初始化参数绑定"><a href="#4-3-类型转换器和初始化参数绑定" class="headerlink" title="4.3 类型转换器和初始化参数绑定"></a>4.3 类型转换器和初始化参数绑定</h4><p>可以解决提交的参数类型转换问题</p>
<h4 id="4-4-数据验证"><a href="#4-4-数据验证" class="headerlink" title="4.4 数据验证"></a>4.4 数据验证</h4><p>springmvc支持JSR（Java Specification Requests）303-bean validation数据验证规范。而该规范的实现者很多，其中较常用的是Hibernate Valicator。</p>
<p>需要注意的是，Hebernate Valicator是与Hibernate ORM并列的Hibernate的产品之一。</p>
<p>第一步：导入jar包</p>
<p>Hibernate Valicator的jar包：</p>
<ul>
<li><p>hibernate-validator</p>
</li>
<li><p>jboss-logging</p>
</li>
<li><p>validation-api</p>
</li>
</ul>
<p>第二步：注册验证器和驱动</p>
<p>springmvc.xml</p>
<pre><code>&lt;!-- 注册验证器 --&gt;
&lt;bean id=&quot;myValidator&quot; class=&quot;org.springframework.validation.beanvalidation.LocalValidatorFactoryBean&quot;&gt;
    &lt;property name=&quot;providerClass&quot; value=&quot;org.hibernate.validator.HibernateValidator&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;!-- 注册mvc注解驱动 --&gt;
&lt;mvc:annotation-driven validator=&quot;myValidator&quot;&gt;&lt;/mvc:annotation-driven&gt;
</code></pre><p>第三步：实体类-验证规则</p>
<pre><code>public class Student {
    @NotNull(message=&quot;姓名不以为空&quot;)
    @Size(min=3, max=6, message=&quot;姓名长度在{min}-{max}个字符之间&quot;)
    private String name;

    @Min(value=0, message=&quot;成绩不能小于{value}&quot;)
    @Max(value=100, message=&quot;成绩不能大于{value}&quot;)
    private double score;

    @NotNull(message=&quot;电话不能为空&quot;)
    @Pattern(regexp=&quot;^1[34578]\\d{9}$&quot;,message=&quot;手机号格式不正确&quot;)
    private String mobile;

    ....
    getter and setter
    ...

}
</code></pre><p>第四步：处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {
    @RequestMapping(value={&quot;/register.do&quot;}, method= RequestMethod.POST)
    public ModelAndView doRegister(@Validated Student student, BindingResult br) {

        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;name&quot;, student);
        mv.setViewName(&quot;/WEB-INF/jsp/welcome.jsp&quot;);

        int errorCount = br.getErrorCount();
        if(errorCount &gt; 0) {
            FieldError nameError = br.getFieldError(&quot;name&quot;);
            FieldError scoreError = br.getFieldError(&quot;score&quot;);
            FieldError mobieError = br.getFieldError(&quot;mobile&quot;);

            if(nameError != null) {
                String nameErrorMSG = nameError.getDefaultMessage();
                mv.addObject(&quot;nameErrorMSG&quot;, nameErrorMSG);
            }

            if(scoreError != null) {
                String scoreErrorMSG = scoreError.getDefaultMessage();
                mv.addObject(&quot;scoreErrorMSG&quot;, scoreErrorMSG);
            }

            if(mobieError != null) {
                String mobileErrorMSG = mobieError.getDefaultMessage();
                mv.addObject(&quot;mobileErrorMSG&quot;, mobileErrorMSG);
            }
            mv.setViewName(&quot;/index.jsp&quot;);
        }


        return mv;
    }
}
</code></pre><p>index.jsp</p>
<pre><code>&lt;form action=&quot;${pageContext.request.contextPath }/test/register.do&quot; method=&quot;POST&quot;&gt;
    姓名：&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;${nameErrorMSG }&lt;br /&gt;
    成绩：&lt;input type=&quot;text&quot; name=&quot;score&quot; /&gt;${scoreErrorMSG }&lt;br /&gt;
    电话：&lt;input type=&quot;text&quot; name=&quot;mobile&quot; /&gt;${mobileErrorMSG }&lt;br /&gt;

    &lt;input type=&quot;submit&quot; value=&quot;注册&quot; /&gt;
&lt;/form&gt;
</code></pre><h4 id="4-5-文件上传"><a href="#4-5-文件上传" class="headerlink" title="4.5 文件上传"></a>4.5 文件上传</h4><h5 id="4-5-1-上传单个文件"><a href="#4-5-1-上传单个文件" class="headerlink" title="4.5.1 上传单个文件"></a>4.5.1 上传单个文件</h5><p>第一步：导入jar包</p>
<ul>
<li><p>commons-fileupload</p>
</li>
<li><p>commons-io</p>
</li>
</ul>
<p>第二步：注册</p>
<pre><code>&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;
    &lt;property name=&quot;defaultEncoding&quot; value=&quot;utf-8&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;maxUploadSize&quot; value=&quot;1048576&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt;
</code></pre><p>第三步：页面</p>
<pre><code>&lt;form action=&quot;${pageContext.request.contextPath }/test/upload.do&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;
    文件：&lt;input type=&quot;file&quot; name=&quot;img&quot; /&gt;&lt;br /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;提交&quot; /&gt;
&lt;/form&gt;
</code></pre><p>第四步：处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {
    @RequestMapping(value={&quot;/upload.do&quot;}, method= RequestMethod.POST)
    public String doFileUpload(MultipartFile img, HttpSession session) throws Exception {
        String path = session.getServletContext().getRealPath(&quot;/images&quot;);

        if(img.getSize() &gt; 0) {            
            String fileName = img.getOriginalFilename();
            if(fileName.endsWith(&quot;jpg&quot;) || fileName.endsWith(&quot;png&quot;)) {                
                File file = new File(path, fileName);
                img.transferTo(file);
                return &quot;/success.jsp&quot;;
            }
        }
        return &quot;/fail.jsp&quot;;        
    }

}
</code></pre><h5 id="4-5-2-上传多个文件"><a href="#4-5-2-上传多个文件" class="headerlink" title="4.5.2 上传多个文件"></a>4.5.2 上传多个文件</h5><p>处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {
    @RequestMapping(value={&quot;/upload.do&quot;}, method= RequestMethod.POST)
    public String doFileUpload(@RequestParam MultipartFile[] imgs, HttpSession session) throws Exception {
        String path = session.getServletContext().getRealPath(&quot;/images&quot;);

        for(MultipartFile img:imgs) {        
            if(img.getSize() &gt; 0) {            
                String fileName = img.getOriginalFilename();
                if(fileName.endsWith(&quot;jpg&quot;) || fileName.endsWith(&quot;png&quot;)) {                
                    File file = new File(path, fileName);
                    img.transferTo(file);
                }
            }
        }

        return &quot;/success.jsp&quot;;        
    }

}
</code></pre><p>index.jsp</p>
<pre><code>&lt;form action=&quot;${pageContext.request.contextPath }/test/upload.do&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;
    文件1：&lt;input type=&quot;file&quot; name=&quot;imgs&quot; /&gt;&lt;br /&gt;
    文件2：&lt;input type=&quot;file&quot; name=&quot;imgs&quot; /&gt;&lt;br /&gt;
    文件3：&lt;input type=&quot;file&quot; name=&quot;imgs&quot; /&gt;&lt;br /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;提交&quot; /&gt;
&lt;/form&gt;
</code></pre><h4 id="4-6-拦截器"><a href="#4-6-拦截器" class="headerlink" title="4.6 拦截器"></a>4.6 拦截器</h4><p>springmvc中的拦截器是非常重要和相当有用的，它的主要作用是拦截指定的用户请求，并进行相应的预处理与后处理。其拦截的时间点在“处理器映射器根据用户提交的请求映射出了所要执行的处理器类，并且也找到了要执行该处理器类的处理器适配器，在处理器适配器执行处理器之前”。当然，在处理器映射器映射出所要执行的处理器类时，已经将拦截器与处理器组合为了一个处理器执行链，并返回给了中央调度器。</p>
<h5 id="4-6-1-拦截器的实现"><a href="#4-6-1-拦截器的实现" class="headerlink" title="4.6.1 拦截器的实现"></a>4.6.1 拦截器的实现</h5><p>第一步：注册拦截器</p>
<pre><code>&lt;!-- 注册拦截器 --&gt;
&lt;mvc:interceptors&gt;
    &lt;mvc:interceptor&gt;
        &lt;mvc:mapping path=&quot;/**&quot;/&gt;
        &lt;bean class=&quot;com.bjpowernode.interceptors.OneInterceptor&quot;&gt;&lt;/bean&gt;
    &lt;/mvc:interceptor&gt;
&lt;/mvc:interceptors&gt;
</code></pre><p>第二步：拦截器</p>
<pre><code>public class OneInterceptor implements HandlerInterceptor {    
    @Override
    public boolean preHandle(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2) throws Exception {
        System.out.println(&quot;execute prehandler&quot;);
        return true;
    }    

    @Override
    public void postHandle(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, ModelAndView arg3)
            throws Exception {

        System.out.println(&quot;execute posthandler&quot;);
    }

    @Override
    public void afterCompletion(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, Exception arg3)
            throws Exception {
        System.out.println(&quot;execute aftercomplete&quot;);
    }
}
</code></pre><p>处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {
    @RequestMapping(&quot;/some.do&quot;)
    public String doSome() {
        System.out.println(&quot;execute dosome&quot;);
        return &quot;/WEB-INF/jsp/welcome.jsp&quot;;
    }

}
</code></pre><h5 id="4-6-2-权限拦截器"><a href="#4-6-2-权限拦截器" class="headerlink" title="4.6.2 权限拦截器"></a>4.6.2 权限拦截器</h5><p>处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {
    @RequestMapping(&quot;/some.do&quot;)
    public String doSome() {
        System.out.println(&quot;execute dosome&quot;);
        return &quot;/WEB-INF/jsp/welcome.jsp&quot;;
    }

}
</code></pre><p>拦截器</p>
<pre><code>public class PermissionInterceptor implements HandlerInterceptor {

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)
            throws Exception {

        String user = (String) request.getSession().getAttribute(&quot;user&quot;);
        if(&quot;beijing&quot;.equals(user)) {
            return true;
        }
        request.getRequestDispatcher(&quot;/fail.jsp&quot;).forward(request, response);
        return false;
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler,
            ModelAndView modelAndView) throws Exception {
    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)
            throws Exception {
    }

}
</code></pre><p>注册</p>
<pre><code>&lt;!-- 注册拦截器 --&gt;
&lt;mvc:interceptors&gt;
    &lt;mvc:interceptor&gt;
        &lt;mvc:mapping path=&quot;/**&quot;/&gt;
        &lt;bean class=&quot;com.bjpowernode.interceptors.PermissionInterceptor&quot;&gt;&lt;/bean&gt;
    &lt;/mvc:interceptor&gt;
&lt;/mvc:interceptors&gt;
</code></pre><p>login.jsp</p>
<pre><code>&lt;%
    session.setAttribute(&quot;user&quot;, &quot;beijing&quot;);
%&gt;&gt;
login success.
</code></pre><p>logout.jsp</p>
<pre><code>&lt;%
    session.removeAttribute(&quot;user&quot;);    
%&gt;
logout success.
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/24/java/springmvc/springmvc-4/" data-id="cji15cnvf0071u0fy9qx2dank" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/springmvc/">springmvc</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java/springmvc/springmvc-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/23/java/springmvc/springmvc-3/" class="article-date">
  <time datetime="2018-05-23T07:39:01.000Z" itemprop="datePublished">2018-05-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/springmvc/">springmvc</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/23/java/springmvc/springmvc-3/">第三章 springmvc注解式开发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="3-1-第一个程序"><a href="#3-1-第一个程序" class="headerlink" title="3.1 第一个程序"></a>3.1 第一个程序</h4><h5 id="3-1-1-注解"><a href="#3-1-1-注解" class="headerlink" title="3.1.1 注解"></a>3.1.1 注解</h5><p>springmvc.xml</p>
<pre><code>&lt;!-- 组件扫描器 --&gt;
&lt;context:component-scan base-package=&quot;com.bjpowernode.handlers&quot;&gt;&lt;/context:component-scan&gt;
</code></pre><p>控制器</p>
<pre><code>@org.springframework.stereotype.Controller
public class MyController {
    @RequestMapping(&quot;/my.do&quot;)
    public ModelAndView doSome(HttpServletRequest arg0, HttpServletResponse arg1) {
        return new ModelAndView(&quot;/WEB-INF/jsp/welcome.jsp&quot;);
    }

}
</code></pre><h5 id="3-1-2-多个请求指向同一个处理器、一个处理器中定义多个处理器方法"><a href="#3-1-2-多个请求指向同一个处理器、一个处理器中定义多个处理器方法" class="headerlink" title="3.1.2 多个请求指向同一个处理器、一个处理器中定义多个处理器方法"></a>3.1.2 多个请求指向同一个处理器、一个处理器中定义多个处理器方法</h5><pre><code>@org.springframework.stereotype.Controller
public class MyController {
    @RequestMapping({&quot;/first.do&quot;,&quot;hello.do&quot;})
    public ModelAndView doFirst(HttpServletRequest arg0, HttpServletResponse arg1) {
        return new ModelAndView(&quot;/WEB-INF/jsp/welcome.jsp&quot;);
    }

    @RequestMapping(&quot;/second.do&quot;)
    public ModelAndView doSecond(HttpServletRequest arg0, HttpServletResponse arg1) {
        return new ModelAndView(&quot;/WEB-INF/jsp/welcome.jsp&quot;);
    }
}
</code></pre><h5 id="3-1-3-命名空间-RequestMapping"><a href="#3-1-3-命名空间-RequestMapping" class="headerlink" title="3.1.3 命名空间 @RequestMapping"></a>3.1.3 命名空间 @RequestMapping</h5><pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;xxx/ooo/jjj&quot;)
public class MyController {
    @RequestMapping({&quot;/first.do&quot;,&quot;hello.do&quot;})
    public ModelAndView doFirst(HttpServletRequest arg0, HttpServletResponse arg1) {
        return new ModelAndView(&quot;/WEB-INF/jsp/welcome.jsp&quot;);
    }

    @RequestMapping(&quot;/second.do&quot;)
    public ModelAndView doSecond(HttpServletRequest arg0, HttpServletResponse arg1) {
        return new ModelAndView(&quot;/WEB-INF/jsp/welcome.jsp&quot;);
    }
}
</code></pre><h5 id="3-1-4-请求中的通配符"><a href="#3-1-4-请求中的通配符" class="headerlink" title="3.1.4 请求中的通配符"></a>3.1.4 请求中的通配符</h5><pre><code>@RequestMapping(&quot;/second*.do&quot;)
</code></pre><h5 id="3-1-5-对请求提交方式的定义"><a href="#3-1-5-对请求提交方式的定义" class="headerlink" title="3.1.5 对请求提交方式的定义"></a>3.1.5 对请求提交方式的定义</h5><pre><code>@RequestMapping(value={&quot;/first.do&quot;,&quot;hello.do&quot;}, method= RequestMethod.POST)
</code></pre><h4 id="3-2-处理器方法的参数"><a href="#3-2-处理器方法的参数" class="headerlink" title="3.2 处理器方法的参数"></a>3.2 处理器方法的参数</h4><p>处理器方法常用的参数有五类，这些参数会在系统调用时由系统自动赋值，即程序员可以在方法内直接使用。</p>
<ul>
<li><p>HttpServleRequest</p>
</li>
<li><p>HttpServletResponse</p>
</li>
<li><p>HttpSession</p>
</li>
<li><p>用于承载数据的Model</p>
</li>
<li><p>请求中所携带的参数</p>
</li>
</ul>
<h4 id="3-3-处理器方法接收请求里的参数"><a href="#3-3-处理器方法接收请求里的参数" class="headerlink" title="3.3 处理器方法接收请求里的参数"></a>3.3 处理器方法接收请求里的参数</h4><p>index.jsp</p>
<pre><code>&lt;form action=&quot;${pageContext.request.contextPath }/test/register.do&quot; method=&quot;POST&quot;&gt;
    姓名：&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;br /&gt;
    年龄：&lt;input type=&quot;text&quot; name=&quot;age&quot; /&gt;&lt;br /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;注册&quot; /&gt;
&lt;/form&gt;
</code></pre><p>welcome.jsp</p>
<pre><code>name=${name}
age=${age }
</code></pre><p>web.xml</p>
<p>添加过滤器，解决中文乱码问题</p>
<pre><code>&lt;filter&gt;
      &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;
      &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;
      &lt;init-param&gt;
          &lt;param-name&gt;encoding&lt;/param-name&gt;
          &lt;param-value&gt;utf-8&lt;/param-value&gt;
      &lt;/init-param&gt;
      &lt;init-param&gt;
          &lt;param-name&gt;forceEncoding&lt;/param-name&gt;
          &lt;param-value&gt;true&lt;/param-value&gt;
      &lt;/init-param&gt;
&lt;/filter&gt;

&lt;filter-mapping&gt;
    &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</code></pre><h5 id="3-3-1-接收请求参数-逐个接收"><a href="#3-3-1-接收请求参数-逐个接收" class="headerlink" title="3.3.1 接收请求参数 - 逐个接收"></a>3.3.1 接收请求参数 - 逐个接收</h5><p>控制器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {
    @RequestMapping(value={&quot;/register.do&quot;}, method= RequestMethod.POST)
    public ModelAndView doRegister(String name, int age) {
        System.out.println(&quot;name=&quot;+name);
        System.out.println(&quot;age=&quot;+age);

        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;name&quot;, name);
        mv.addObject(&quot;age&quot;, age);
        mv.setViewName(&quot;/WEB-INF/jsp/welcome.jsp&quot;);
        return mv;
    }

}
</code></pre><h5 id="3-3-2-接收请求参数-校正请求参数名"><a href="#3-3-2-接收请求参数-校正请求参数名" class="headerlink" title="3.3.2 接收请求参数 - 校正请求参数名"></a>3.3.2 接收请求参数 - 校正请求参数名</h5><p>参数pname</p>
<pre><code>姓名：&lt;input type=&quot;text&quot; name=&quot;pname&quot; /&gt;&lt;br /&gt;
</code></pre><p>@RequestParam校正</p>
<pre><code>public ModelAndView doRegister(@RequestParam(&quot;pname&quot;) String name, int age) {...}
</code></pre><h5 id="3-3-3-接收请求参数-以对象形式整体接收"><a href="#3-3-3-接收请求参数-以对象形式整体接收" class="headerlink" title="3.3.3 接收请求参数 - 以对象形式整体接收"></a>3.3.3 接收请求参数 - 以对象形式整体接收</h5><p>Student.class</p>
<pre><code>public class Student {
    private String name;
    private int age;

    ...
    getter and setter
    ...

}
</code></pre><p>控制器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {
    @RequestMapping(value={&quot;/register.do&quot;}, method= RequestMethod.POST)
    public ModelAndView doRegister(Student student) {
        System.out.println(&quot;name=&quot;+student.getName());
        System.out.println(&quot;age=&quot;+student.getAge());

        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;name&quot;, student);
        mv.setViewName(&quot;/WEB-INF/jsp/welcome.jsp&quot;);
        return mv;
    }

}
</code></pre><p>整体接收，要求参数名name,age要与实体类属性名相同 </p>
<h5 id="3-3-3-接收请求参数-域属性参数的接收"><a href="#3-3-3-接收请求参数-域属性参数的接收" class="headerlink" title="3.3.3 接收请求参数 - 域属性参数的接收"></a>3.3.3 接收请求参数 - 域属性参数的接收</h5><p>Student.class</p>
<pre><code>public class Student {
    private String name;
    private int age;
    private School school;
    ...
        getter and setter
    ...
}
</code></pre><p>School.class</p>
<pre><code>public class School {
    private String sname;
    private String address;
    public String getSname() {
        return sname;
    }
    ...
        getter and setter
    ...        
}
</code></pre><p>index.jsp</p>
<pre><code>&lt;form action=&quot;${pageContext.request.contextPath }/test/register.do&quot; method=&quot;POST&quot;&gt;
    姓名：&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;br /&gt;
    年龄：&lt;input type=&quot;text&quot; name=&quot;age&quot; /&gt;&lt;br /&gt;
    学校：&lt;input type=&quot;text&quot; name=&quot;School.sname&quot; /&gt;&lt;br /&gt;
    校址：&lt;input type=&quot;text&quot; name=&quot;School.address&quot; /&gt;&lt;br /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;注册&quot; /&gt;
&lt;/form&gt;
</code></pre><h4 id="3-4-处理器方法的返回值"><a href="#3-4-处理器方法的返回值" class="headerlink" title="3.4 处理器方法的返回值"></a>3.4 处理器方法的返回值</h4><h5 id="3-4-1-返回ModelAndView"><a href="#3-4-1-返回ModelAndView" class="headerlink" title="3.4.1 返回ModelAndView"></a>3.4.1 返回ModelAndView</h5><p>当处理器方法处理完后，既需要跳转到其它资源，也需要在资源间传递数据，那么就应该使用ModelAndView。</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {
    @RequestMapping(value={&quot;/register.do&quot;}, method= RequestMethod.POST)
    public ModelAndView doRegister(Student student) {
        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;name&quot;, student);
        mv.setViewName(&quot;/WEB-INF/jsp/welcome.jsp&quot;);
        return mv;
    }

}
</code></pre><h5 id="3-4-2-返回String"><a href="#3-4-2-返回String" class="headerlink" title="3.4.2 返回String"></a>3.4.2 返回String</h5><p>只需要进行跳转，而不需要进行数据传递时，可以使用String。</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {
    @RequestMapping(value={&quot;/register.do&quot;}, method= RequestMethod.POST)
    public String soSome() {
        return &quot;/WEB-INF/jsp/welcome.jsp&quot;;
    }

}
</code></pre><p>物理视图：/WEB-INF/jsp/welcome.jsp</p>
<p>逻辑视图：welcome，需要视图解析器转换为物理视图</p>
<h5 id="3-4-3-返回void"><a href="#3-4-3-返回void" class="headerlink" title="3.4.3 返回void"></a>3.4.3 返回void</h5><p>index.jsp</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;
    $(function (){
        $(&quot;button&quot;).click(function(){
            $.ajax({
                url:&quot;test/ajax.do&quot;,
                data:{
                    name:&quot;zhangsan&quot;,
                    age:23
                },
                success:function(data){
                    var json=eval(&quot;(&quot;+ data +&quot;)&quot;);
                    alert(json.name + json.age);
                }
            });
        });
    });
&lt;/script&gt;
&lt;button&gt;ajax submit&lt;/button&gt;
</code></pre><p>处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {
    @RequestMapping(&quot;/ajax.do&quot;)
    public void doAjax(String name, int age, HttpServletResponse response) throws IOException {
        HashMap&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();
        map.put(&quot;name&quot;, name);
        map.put(&quot;age&quot;, age);

        JSONObject json = JSONObject.fromObject(map);
        String jsonStr = json.toString();

        PrintWriter out = response.getWriter();
        out.println(jsonStr);
    }

}
</code></pre><p>需要导入json-lib相关的包</p>
<h5 id="3-4-4-返回Object"><a href="#3-4-4-返回Object" class="headerlink" title="3.4.4 返回Object"></a>3.4.4 返回Object</h5><p>处理器方法也可以返回Object对象，但返回的这个Object对象不是作为逻辑视图出现的，而是作为直接在页面显示的数据出现的。</p>
<p>返回Object对象，需要使用@ResponseBody注解，将转换后的JSON数据放入到响应体中。</p>
<p>#####（1）、环境搭建</p>
<p>A、导入jar包</p>
<p>由于返回Object数据，一般都是将数据转化为了JSON对象后传递给浏览器页面的。而这个由Object转换为JSON，是由Jackson工具完成的。所以需要导入Jackson的相关jar包。</p>
<p>jackson-annotations、jackson-core、jackson-databind</p>
<p>B、注册注解驱动</p>
<p>将Object数据转化为JSON数据，需要由http消息转换器HttpMessageConvert完成。而消息转换器的开启，需要由<code>&lt;mvc:annotation-driven&gt;</code>来完成。</p>
<p>当Spring容器进行初始化过程中在<code>&lt;mvc:annotation-driven&gt;</code>处创建注解驱动时，默认创建了七个HttpMessageConvert对象。也就是说，我们注册<code>&lt;mvc:annotation-driven&gt;</code>，就是为了让容器为我们创建HttpMessageConvert对象。</p>
<p>C、@ResponseBody</p>
<p>给处理器方法添加注解</p>
<h5 id="（2）、返回Object-数值型"><a href="#（2）、返回Object-数值型" class="headerlink" title="（2）、返回Object-数值型"></a>（2）、返回Object-数值型</h5><p>springmvc.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;

    &lt;!-- 注册组件扫描器 --&gt;
    &lt;context:component-scan base-package=&quot;com.bjpowernode.handlers&quot;&gt;&lt;/context:component-scan&gt;

    &lt;!-- 注册注解驱动器 --&gt;
    &lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt;

&lt;/beans&gt;
</code></pre><p>处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {

    @RequestMapping(&quot;/ajax.do&quot;)
    @ResponseBody //将要返回的数据放入到响应体中
    public Object doAjax() {
        return 123.321;
    }

}
</code></pre><p>index.jsp</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;
    $(function (){
        $(&quot;button&quot;).click(function(){
            $.ajax({
                url:&quot;test/ajax.do&quot;,
                success:function(data){
                    alert(data);
                }
            });
        });
    });
&lt;/script&gt;
 &lt;button&gt;ajax submit&lt;/button&gt;
</code></pre><h5 id="（3）、返回Object-字符串"><a href="#（3）、返回Object-字符串" class="headerlink" title="（3）、返回Object-字符串"></a>（3）、返回Object-字符串</h5><pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {

    @RequestMapping(value=&quot;/ajax.do&quot;,produces=&quot;text/html;charset=utf-8&quot;)
    @ResponseBody //将要返回的数据放入到响应体中
    public Object doAjax() {
        return &quot;临沂&quot;;
    }

}
</code></pre><p>produces指定返回的字符串格式</p>
<h5 id="（4）、返回Object-自定义对象"><a href="#（4）、返回Object-自定义对象" class="headerlink" title="（4）、返回Object-自定义对象"></a>（4）、返回Object-自定义对象</h5><p>处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {

    @RequestMapping(&quot;/ajax.do&quot;)
    @ResponseBody //将要返回的数据放入到响应体中
    public Object doAjax() {
        return new Student(&quot;zhangsan&quot;,23);
    }

}
</code></pre><p>index.jsp</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;
    $(function (){
        $(&quot;button&quot;).click(function(){
            $.ajax({
                url:&quot;test/ajax.do&quot;,
                success:function(data){
                    alert(data.name + data.age);
                }
            });
        });
    });
&lt;/script&gt;
&lt;button&gt;ajax submit&lt;/button&gt;
</code></pre><h5 id="（4）、返回Object-List集合"><a href="#（4）、返回Object-List集合" class="headerlink" title="（4）、返回Object-List集合"></a>（4）、返回Object-List集合</h5><p>处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {

    @RequestMapping(&quot;/ajax.do&quot;)
    @ResponseBody //将要返回的数据放入到响应体中
    public Object doAjax() {
        ArrayList&lt;Student&gt; list = new ArrayList&lt;Student&gt;();
        list.add(new Student(&quot;zhangsan&quot;,23));
        list.add(new Student(&quot;lisi&quot;,23));
        return list;
    }

}
</code></pre><p>index.jsp</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;
    $(function (){
        $(&quot;button&quot;).click(function(){
            $.ajax({
                url:&quot;test/ajax.do&quot;,
                success:function(data){
                    $(data).each(function(index){
                        alert(data[index].name + data[index].age);
                    });
                }
            });
        });
    });
&lt;/script&gt;
 &lt;button&gt;ajax submit&lt;/button&gt;
</code></pre><h5 id="（5）、返回Object-Map集合"><a href="#（5）、返回Object-Map集合" class="headerlink" title="（5）、返回Object-Map集合"></a>（5）、返回Object-Map集合</h5><p>处理器</p>
<pre><code>@org.springframework.stereotype.Controller
@RequestMapping(&quot;/test&quot;)
public class MyController {

    @RequestMapping(&quot;/ajax.do&quot;)
    @ResponseBody //将要返回的数据放入到响应体中
    public Object doAjax() {
        HashMap&lt;String, Student&gt; map = new HashMap&lt;String,Student&gt;();
        map.put(&quot;stu1&quot;, new Student(&quot;zhangsan&quot;,23));
        map.put(&quot;stu2&quot;, new Student(&quot;lisi&quot;,24));
        return map;
    }

}
</code></pre><p>index.jsp</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;
    $(function (){
        $(&quot;button&quot;).click(function(){
            $.ajax({
                url:&quot;test/ajax.do&quot;,
                success:function(data){
                    $(data).each(function(index){
                        alert(data.stu1.name + data.stu2.age);
                    });
                }
            });
        });
    });
&lt;/script&gt;
&lt;button&gt;ajax submit&lt;/button&gt;    
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/23/java/springmvc/springmvc-3/" data-id="cji15cnv4006nu0fyhv9lakuy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/springmvc/">springmvc</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java/springmvc/springmvc-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/22/java/springmvc/springmvc-2/" class="article-date">
  <time datetime="2018-05-22T08:49:31.000Z" itemprop="datePublished">2018-05-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/springmvc/">springmvc</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/22/java/springmvc/springmvc-2/">第二章 springmvc配置式开发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="2-1-处理器映射器-HandlerMapping"><a href="#2-1-处理器映射器-HandlerMapping" class="headerlink" title="2.1 处理器映射器 HandlerMapping"></a>2.1 处理器映射器 HandlerMapping</h4><p>HandlerMapping接口负责根据request请求找到相应的Handler处理器及Interceptor拦截器，并将它们封装在HandlerExecutionCahin对象中，返回给中央调度器。</p>
<p>其常用的两种实现类：</p>
<ul>
<li><p>BeanNameUrlHandlerMapping</p>
</li>
<li><p>SimpleUrlHandlerMapping</p>
</li>
</ul>
<h5 id="1-、BeanNameUrlHandlerMapping"><a href="#1-、BeanNameUrlHandlerMapping" class="headerlink" title="(1)、BeanNameUrlHandlerMapping"></a>(1)、BeanNameUrlHandlerMapping</h5><p>BeanNameUrlHandlerMapping处理器映射器，会根据请求的url与spring容器中定义的处理器的bean的name值进行匹配，从而在spring容器中找到处理器bean的实例。</p>
<pre><code>&lt;bean id=&quot;/my.do&quot; class=&quot;com.bjpowernode.handlers.MyController&quot;&gt;&lt;/bean&gt;
</code></pre><h5 id="2-、SimpleUrlHandlerMapping"><a href="#2-、SimpleUrlHandlerMapping" class="headerlink" title="(2)、SimpleUrlHandlerMapping"></a>(2)、SimpleUrlHandlerMapping</h5><p>SimpleUrlHandlerMapping处理器映射器，不仅可以将url与处理器分离，还可以对url进行统一映射管理。</p>
<p>SimpleUrlHandlerMapping处理器映射器，会根据请求的url与spring容器中定义的处理器映射器子标签的key属性进行匹配。匹配上后，再将该key的value值与处理器的bean的id值进行匹配，从而在spring容器中找到处理器bean。</p>
<pre><code>&lt;!-- 注册处理器 --&gt;
&lt;bean id=&quot;myController&quot; class=&quot;com.bjpowernode.handlers.MyController&quot;&gt;&lt;/bean&gt;
&lt;!-- 注册处理器映射器: SimpleUrlHandlerMapping--&gt;
&lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;
    &lt;!-- 
    &lt;property name=&quot;mappings&quot;&gt;
        &lt;props&gt;
            &lt;prop key=&quot;/hello.do&quot;&gt;myController&lt;/prop&gt;
            &lt;prop key=&quot;/world.do&quot;&gt;myController&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
     --&gt;
     &lt;property name=&quot;urlMap&quot;&gt;
         &lt;map&gt;
             &lt;entry key=&quot;/hello.do&quot; value=&quot;myController&quot;&gt;&lt;/entry&gt;
             &lt;entry key=&quot;/world.do&quot; value=&quot;myController&quot;&gt;&lt;/entry&gt;
         &lt;/map&gt;
     &lt;/property&gt;
&lt;/bean&gt;
</code></pre><h4 id="2-2-处理器适配器-HandlerAdapter"><a href="#2-2-处理器适配器-HandlerAdapter" class="headerlink" title="2.2 处理器适配器 HandlerAdapter"></a>2.2 处理器适配器 HandlerAdapter</h4><p>前面所写的代码中，之所以要将Handler定义为Controller接口的实现类，就是因为这里使用的处理器适配器是SimpleControllerAdapter。打开其源码，可以看到将handler强转为了Controller。在定义Handler时，若不将其定义为Controller接口的实现类，这里的强转会出错。</p>
<p>当然，中央调度器首先会调用该适配器的supports()方法，判断该Handler是否与Controller具有is-a的关系。在具有is-a的关系的前提下，才会强转。</p>
<p>常用的两种处理器适配器：</p>
<p>（1）、SimpleControllerHandlerAdapter</p>
<p>代码：</p>
<pre><code>public class MyController implements Controller {

        @Override
        public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
            ModelAndView mv = new ModelAndView();
            //其底层执行的是request.setAttribute()方法
            mv.addObject(&quot;message&quot;, &quot;hello world&quot;);
            mv.setViewName(&quot;welcome&quot;);
            return mv;
        }

    }
</code></pre><p>（2）、HttpRequstHandlerAdapter</p>
<p>代码:</p>
<pre><code>public class MyController implements HttpRequestHandler{

    @Override
    public void handleRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        request.setAttribute(&quot;message&quot;, &quot;hello sprngmvcworld&quot;);
        request.getRequestDispatcher(&quot;/WEB-INF/jsp/welcome.jsp&quot;).forward(request, response);
    }

}
</code></pre><h4 id="2-3-处理器"><a href="#2-3-处理器" class="headerlink" title="2.3 处理器"></a>2.3 处理器</h4><p>处理器除了实现Controller接口外，还可以继承自一些其它的类来完成一些特殊的功能。</p>
<p>（1）、继承自AbstractController类</p>
<p>若处理器继承自AbstractController类，那么该控制器就具有了一些新的功能。因为AbstractController类还继承自一个父类WebContentGenerator。</p>
<p>WebContentGenerator类具有supportedMethods属性，可以设置支持的Http数据提交方式。默认支持GET,POST。</p>
<pre><code>public class MyController extends AbstractController{

    @Override
    protected ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response)
            throws Exception {
        ModelAndView mv = new ModelAndView();
        //其底层执行的是request.setAttribute()方法
        mv.addObject(&quot;message&quot;, &quot;hello world&quot;);
        mv.setViewName(&quot;welcome&quot;);
        return mv;
    }

}
</code></pre><p>springmvc.xml</p>
<pre><code>&lt;bean id=&quot;/my.do&quot; class=&quot;com.bjpowernode.handlers.MyController&quot;&gt;
    &lt;property name=&quot;supportedMethods&quot; value=&quot;POST&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre><p>（2）、继承自MultiActionController类</p>
<p>springmvc.xml</p>
<pre><code>&lt;!-- 注册处理器 --&gt;
&lt;bean id=&quot;myController&quot; class=&quot;com.bjpowernode.handlers.MyController&quot;&gt;&lt;/bean&gt;
&lt;!-- 注册处理器映射器: SimpleUrlHandlerMapping--&gt;
&lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;
     &lt;property name=&quot;urlMap&quot;&gt;
         &lt;map&gt;
             &lt;!-- 
                MultiActionController类具有一个属性：方法名解析器methodNameResolver，
                其具有默认值InternalPathMethodNameResolver，
                该解析器将控制器中的方法名作为url中的资源名称进行解析，
                那了就意味着，我们提交请求时，要将方法名作为资源名称出现。
             --&gt;
             &lt;entry key=&quot;/my/*.do&quot; value=&quot;myController&quot;&gt;&lt;/entry&gt;
         &lt;/map&gt;
     &lt;/property&gt;
&lt;/bean&gt;
</code></pre><p>控制器</p>
<pre><code>public class MyController extends MultiActionController{

    public ModelAndView doFirst(HttpServletRequest request, HttpServletResponse response)
            throws Exception {
        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;message&quot;, &quot;execute dofisrt method&quot;);
        mv.setViewName(&quot;/WEB-INF/jsp/welcome.jsp&quot;);
        return mv;
    }

    public ModelAndView doSecond(HttpServletRequest request, HttpServletResponse response)
            throws Exception {
        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;message&quot;, &quot;execute dosecond method&quot;);
        mv.setViewName(&quot;/WEB-INF/jsp/welcome.jsp&quot;);
        return mv;
    }

}
</code></pre><p>访问路径    </p>
<pre><code>http://localhost:8080/03-MultiActionController-test/my/doFirst.do

http://localhost:8080/03-MultiActionController-test/my/doSecond.do
</code></pre><p>方法名解析器methodNameResolver，除了具有默认值InternalPathMethodNameResolver方法名解析器以外，还具有另外两个方法名解析器：PropertiesMethodNmaeResolver，ParameterMethodNameResolver。</p>
<h4 id="2-4-视图解析器"><a href="#2-4-视图解析器" class="headerlink" title="2.4 视图解析器"></a>2.4 视图解析器</h4><p>ModelAndView 即模式与视图，通过addObject()方法向模型中添加数据，通过setViewName()方法向模型添加视图名称。</p>
<p>跟踪addObject()方法，可以知道这里的模型就是ModelMap，而ModelMap的本质就是个HashMap，向模型中添加数据，就是向ModelMap中添加数据。</p>
<h5 id="（1）、内部资源视图解析器InternalResourceViewResolver"><a href="#（1）、内部资源视图解析器InternalResourceViewResolver" class="headerlink" title="（1）、内部资源视图解析器InternalResourceViewResolver"></a>（1）、内部资源视图解析器InternalResourceViewResolver</h5><p>该视图解析器用于完成当前应用内部资源的封装与跳转。</p>
<pre><code>&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;
    &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre><h5 id="（2）、BeanNameViewResolver视图解析器"><a href="#（2）、BeanNameViewResolver视图解析器" class="headerlink" title="（2）、BeanNameViewResolver视图解析器"></a>（2）、BeanNameViewResolver视图解析器</h5><p>该视图解析器用于将资源封装为spring容器中注册的bean实例。</p>
<ul>
<li><p>RedirectView：定义外部资源视图对象</p>
</li>
<li><p>JstlView：定义内部资源视图对象</p>
</li>
</ul>
<p>springmvc.xml</p>
<pre><code>&lt;!-- 注册视图解析器 --&gt;
&lt;bean class=&quot;org.springframework.web.servlet.view.BeanNameViewResolver&quot;&gt;&lt;/bean&gt;

&lt;!-- 注册内部和外部视图bean --&gt;
&lt;bean id=&quot;internalResource&quot; class=&quot;org.springframework.web.servlet.view.JstlView&quot;&gt;
    &lt;property name=&quot;url&quot; value=&quot;WEB-INF/jsp/welcome.jsp&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
&lt;bean id=&quot;taobao&quot; class=&quot;org.springframework.web.servlet.view.RedirectView&quot;&gt;
    &lt;property name=&quot;url&quot; value=&quot;http://www.taobao.com&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre><p>控制器</p>
<pre><code>public class MyController implements Controller {

    @Override
    public ModelAndView handleRequest(HttpServletRequest arg0, HttpServletResponse arg1) throws Exception {
        return new ModelAndView(&quot;taobao&quot;);
    }

}
</code></pre><h5 id="（3）、XmlViewResolver视图解析器"><a href="#（3）、XmlViewResolver视图解析器" class="headerlink" title="（3）、XmlViewResolver视图解析器"></a>（3）、XmlViewResolver视图解析器</h5><p>专门用来定义视图bean的配置文件myViews.xml</p>
<pre><code>&lt;bean id=&quot;internalResource&quot; class=&quot;org.springframework.web.servlet.view.JstlView&quot;&gt;
    &lt;property name=&quot;url&quot; value=&quot;WEB-INF/jsp/welcome.jsp&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
&lt;bean id=&quot;taobao&quot; class=&quot;org.springframework.web.servlet.view.RedirectView&quot;&gt;
    &lt;property name=&quot;url&quot; value=&quot;http://www.taobao.com&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre><p>springmvc.xml</p>
<pre><code>&lt;!-- 注册XmlViewResolver视图解析器 --&gt;
&lt;bean class=&quot;org.springframework.web.servlet.view.XmlViewResolver&quot;&gt;
    &lt;property name=&quot;location&quot; value=&quot;classpath:myViews.xml&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre><h5 id="（4）、ResourceBundleViewResolver视图解析器"><a href="#（4）、ResourceBundleViewResolver视图解析器" class="headerlink" title="（4）、ResourceBundleViewResolver视图解析器"></a>（4）、ResourceBundleViewResolver视图解析器</h5><p>myVews.properties</p>
<pre><code>taobao.(class)=org.springframework.web.servlet.view.RedirectView
taobao.url=http://www.taobao.com

internalResource.(class)=org.springframework.web.servlet.view.JstlView
internalResource.url=/WEB-INF/jsp/welcome.jsp
</code></pre><p>springmvc.xml</p>
<pre><code>&lt;!-- 注册处理器 --&gt;
&lt;bean id=&quot;/my.do&quot; class=&quot;com.bjpowernode.handlers.MyController&quot;&gt;&lt;/bean&gt;

&lt;!-- 注册视图解析器 --&gt;
&lt;bean class=&quot;org.springframework.web.servlet.view.ResourceBundleViewResolver&quot;&gt;
    &lt;property name=&quot;basename&quot; value=&quot;myViews&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre><p>注：视图解析器的优先级</p>
<p>有时经常需要应用一些视图解析器策略来解析视图名称，即当同时存在多个视图解析器均可解析ModelAndView中的同一视图名称时，哪个视图解析器会起作用呢？</p>
<p>视图解析器有一个order属性，专门用于设置多个视图解析器的优先级。数字越小，优先级越高。一般不会InternalResourceViewResolver解析器指定优先级，即让其优先级最低。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/22/java/springmvc/springmvc-2/" data-id="cji15cnva006uu0fyr1eaj8rp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/springmvc/">springmvc</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java/springmvc/springmvc-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/22/java/springmvc/springmvc-1/" class="article-date">
  <time datetime="2018-05-22T07:57:36.000Z" itemprop="datePublished">2018-05-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/springmvc/">springmvc</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/22/java/springmvc/springmvc-1/">第一章 springmvc概述</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-1-springmvc程序"><a href="#1-1-springmvc程序" class="headerlink" title="1.1 springmvc程序"></a>1.1 springmvc程序</h4><h5 id="1、配置web-xml"><a href="#1、配置web-xml" class="headerlink" title="1、配置web.xml"></a>1、配置web.xml</h5><p>配置中央调度器</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;
    &lt;display-name&gt;01-springmvc-hello&lt;/display-name&gt;

    &lt;!-- 中央调度器 --&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;!-- 指定springmvc配置文件的位置及文件名 --&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
            &lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;!-- 在Tomcat启动时直接创建当前Servlet --&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;springMVC&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

     &lt;welcome-file-list&gt;
       &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
       &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;
       &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
       &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;
       &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;
       &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;
     &lt;/welcome-file-list&gt;
&lt;/web-app&gt;
</code></pre><h5 id="2、配置springmvc-xml"><a href="#2、配置springmvc-xml" class="headerlink" title="2、配置springmvc.xml"></a>2、配置springmvc.xml</h5><p>配置视图解析器、注册处理器</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;

&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;

    &lt;!-- 注册视图解析器 --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;
        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!-- 注册处理器方式一：一个url对应一个controller 使用的处理器映射器：BeanNameUrlHandlerMapping --&gt;
    &lt;!-- &lt;bean id=&quot;/my.do&quot; class=&quot;com.bjpowernode.handlers.MyController&quot;&gt;&lt;/bean&gt; --&gt;

    &lt;!-- 注册处理器方式二：多个url对应一个controller --&gt;    
        &lt;!-- 注册处理器 --&gt;
        &lt;bean id=&quot;myController&quot; class=&quot;com.bjpowernode.handlers.MyController&quot;&gt;&lt;/bean&gt;
        &lt;!-- 注册处理器映射器: SimpleUrlHandlerMapping--&gt;
        &lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;
            &lt;!-- 
            &lt;property name=&quot;mappings&quot;&gt;
                &lt;props&gt;
                    &lt;prop key=&quot;/hello.do&quot;&gt;myController&lt;/prop&gt;
                    &lt;prop key=&quot;/world.do&quot;&gt;myController&lt;/prop&gt;
                &lt;/props&gt;
            &lt;/property&gt;
             --&gt;
             &lt;property name=&quot;urlMap&quot;&gt;
                 &lt;map&gt;
                     &lt;entry key=&quot;/hello.do&quot; value=&quot;myController&quot;&gt;&lt;/entry&gt;
                     &lt;entry key=&quot;/world.do&quot; value=&quot;myController&quot;&gt;&lt;/entry&gt;
                 &lt;/map&gt;
             &lt;/property&gt;
        &lt;/bean&gt;

&lt;/beans&gt;
</code></pre><h5 id="3、处理器"><a href="#3、处理器" class="headerlink" title="3、处理器"></a>3、处理器</h5><pre><code>package com.bjpowernode.handlers;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.Controller;

public class MyController implements Controller {

    @Override
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
        ModelAndView mv = new ModelAndView();
        //其底层执行的是request.setAttribute()方法
        mv.addObject(&quot;message&quot;, &quot;hello world&quot;);
        mv.setViewName(&quot;welcome&quot;);
        return mv;
    }

}
</code></pre><h5 id="4、视图"><a href="#4、视图" class="headerlink" title="4、视图"></a>4、视图</h5><pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;
    pageEncoding=&quot;UTF-8&quot;%&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;
&lt;title&gt;Insert title here&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
${message}
aaaa
&lt;/body&gt;
&lt;/html&gt;
</code></pre><h4 id="1-2-lt-url-pattern-gt-详解"><a href="#1-2-lt-url-pattern-gt-详解" class="headerlink" title="1.2 &lt;url-pattern&gt;详解"></a>1.2 <code>&lt;url-pattern&gt;</code>详解</h4><p>中央调度器的url-pattern详解</p>
<p>（1）、建议写成*.do形式</p>
<p>（2）、不能写为/*</p>
<p>因为DispatcherServlet会将向动态页面的跳转请求，即向JSP页面的跳转请求也当作是一个普通的Controller请求。中央调度器会调用处理器映射器为其查找相应的处理器。当然是找不到的，在这种情况下所有的jsp页面跳转均会报404错误。</p>
<p>（3）、最好也不要写为/</p>
<p>因为DispatcherServlet会将向静态资源的请求，例如css,js,jpg,pgn等资源的获取请求，当作是一个普通的Controller请求。中央调度器会调用处理器映射器为其查找相应的处理器。当然也是找不到的，所以在这种情况下，所有的表态资源获取请求也均会报404错误。</p>
<p>（4）、不得不配成/时，解决静态资源无法访问的问题。</p>
<p>解决方式一：使用Tomcat默认的Servlet解决</p>
<pre><code>web.xml

&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;default&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.jpg&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;

&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;default&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.csss&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre><p>解决方式二：使用mvc的default-servlet-handler解决</p>
<p> 其底层调用的还是tomcat默认的servlet</p>
<pre><code>springmvc.xml

&lt;mvc:default-servlet-handler/&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/22/java/springmvc/springmvc-1/" data-id="cji15cnvc006xu0fy399ctqpb" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/springmvc/">springmvc</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java/mybatis/mybatis-7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/13/java/mybatis/mybatis-7/" class="article-date">
  <time datetime="2018-05-13T01:51:37.000Z" itemprop="datePublished">2018-05-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mybatis/">mybatis</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/13/java/mybatis/mybatis-7/">第七章 MyBatis - 查询缓存</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="7-1-一级缓存与二级缓存"><a href="#7-1-一级缓存与二级缓存" class="headerlink" title="7.1 一级缓存与二级缓存"></a>7.1 一级缓存与二级缓存</h4><p>MyBatis的查询缓存机制，根据缓存区的作用域与生命周期，可划分为两种：一级缓存与二级缓存。</p>
<p>MyBatis查询缓存的作用域是根据映射文件mapper的namespace划分的，相同的namespace的mapper查询数据存放在同一个缓存区域。不同namespace下的数据互不干扰。无论是一级缓存还是二级缓存，都是按照namespace进行分别存放的。</p>
<p>但一、二级缓存的不同之处在于，SqlSession一旦关闭，则SqlSession中的数据将不存在。而二级缓存的生命周期会与整个应用同步，与SqlSession是否关闭无关。换句话说，一级缓存是在同一线程（同一SqlSession）间共享数据，而二级缓存是在不同线程（不同SqlSession）间共享数据。</p>
<h4 id="7-2-一级缓存"><a href="#7-2-一级缓存" class="headerlink" title="7.2 一级缓存"></a>7.2 一级缓存</h4><p>MyBatis一级缓存是基于org.apache.ibatis.cache.impl.PerpetualCache类的HashMap本地缓存，其作用域是SqlSession。在同一个SqlSession中两次执行相同的sql查询语句，第一次执行完毕后，会将查询结果写入到缓存中，第二次会从缓存中直接获取数据，而不再到数据库中进行查询，从而提高查询效率。</p>
<p>当一个SqlSession结束后，该SqlSession中的一级缓存也就不存在了。<strong>MyBatis默认一级缓存是开启状态，且不能关闭。</strong></p>
<pre><code>public void testSelectStudentsByCondition() {

    Student student = dao.selectStudentById(20);
    System.out.println(student);

    Student students = dao.selectStudentById(20);
    System.out.println(students);

}
</code></pre><p>查看控制台</p>
<pre><code>[DEBUG][2018-05-13 10:08:15] com.bjpowernode.dao.IStudentDao.selectStudentById 159 ==&gt;  Preparing: select id,name,age,score from students where id=? 
[DEBUG][2018-05-13 10:08:15] com.bjpowernode.dao.IStudentDao.selectStudentById 159 ==&gt; Parameters: 20(Integer)
[DEBUG][2018-05-13 10:08:15] com.bjpowernode.dao.IStudentDao.selectStudentById 159 &lt;==      Total: 1
Student [id=20, name=zhangsan2, age=24, score=1.0]
Student [id=20, name=zhangsan2, age=24, score=1.0]
</code></pre><p>sql语句只执行了一次，说明第二次是从缓存中读取的数据，证明了一级缓存是存在的。</p>
<h4 id="7-3-一级缓存-从缓存中查找数据的依据"><a href="#7-3-一级缓存-从缓存中查找数据的依据" class="headerlink" title="7.3 一级缓存 - 从缓存中查找数据的依据"></a>7.3 一级缓存 - 从缓存中查找数据的依据</h4><p> 缓存底层对应的是map集合</p>
<ul>
<li>key: 即查询依据，使用的ORM架构不同，查询依据不同。</li>
<li>value: 查询结果</li>
</ul>
<p>一级缓存中读取数据的依据是：</p>
<ul>
<li>mybatis的查询依据是：sql的id + sql语句</li>
<li>hibernate的查询依据是：查询结果的id</li>
</ul>
<h4 id="7-4-一级缓存-增删改对一级缓存的影响"><a href="#7-4-一级缓存-增删改对一级缓存的影响" class="headerlink" title="7.4 一级缓存 - 增删改对一级缓存的影响"></a>7.4 一级缓存 - 增删改对一级缓存的影响</h4><p>增、删、改都会清空一级缓存，无论是否提交。</p>
<h4 id="7-5-二级缓存-内置二级缓存的开启"><a href="#7-5-二级缓存-内置二级缓存的开启" class="headerlink" title="7.5 二级缓存 - 内置二级缓存的开启"></a>7.5 二级缓存 - 内置二级缓存的开启</h4><p>由于MyBatis从缓存中读取数据的依据与SQL的id相关，所以MyBatis使用二级缓存的目的是为了防止同一查询（相同的Sql id、相同的Sql语句）的反复执行。</p>
<p>而Hibernate由于从缓存中读取数据的依据是查询结果的id，所以Hibernate使用二级缓存的目的是为了在多个查询间共享查询结果。比如第一次查询出了所有的学生，第二次查询id为5的学生，可以从缓存中直接读取。</p>
<p>MyBatis内置的二级缓存为org.apache.ibatis.cache.impl.PerpetualCache</p>
<p><strong>内置二级缓存的开启：</strong></p>
<p>(1)、映射文件中加cache</p>
<pre><code>&lt;mapper namespace=&quot;com.bjpowernode.dao.IStudentDao&quot;&gt;

    &lt;cache /&gt;
    ...
    ...
&lt;/mapper&gt;
</code></pre><p>(2)、实体类实现序列化</p>
<p>Student.java</p>
<pre><code>public class Student implements Serializable {
    ...
}
</code></pre><p>测试类</p>
<pre><code>@Test
public void testSelectStudentsByCondition() {

    sqlSession = MyBatisUtils.getSqlSession();
    dao = sqlSession.getMapper(IStudentDao.class);
    Student student = dao.selectStudentById(20);
    System.out.println(student);

    //清空一级缓存        
    sqlSession.close();

    sqlSession = MyBatisUtils.getSqlSession();
    dao = sqlSession.getMapper(IStudentDao.class);
    Student students = dao.selectStudentById(20);
    System.out.println(students);

}
</code></pre><p>查看控制台</p>
<pre><code>[DEBUG][2018-05-13 10:30:19] com.bjpowernode.dao.IStudentDao 62 Cache Hit Ratio [com.bjpowernode.dao.IStudentDao]: 0.0
Sun May 13 10:30:19 CST 2018 WARN: Establishing SSL connection without server&apos;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&apos;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &apos;false&apos;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.
[DEBUG][2018-05-13 10:30:20] com.bjpowernode.dao.IStudentDao.selectStudentById 159 ==&gt;  Preparing: select id,name,age,score from students where id=? 
[DEBUG][2018-05-13 10:30:21] com.bjpowernode.dao.IStudentDao.selectStudentById 159 ==&gt; Parameters: 20(Integer)
[DEBUG][2018-05-13 10:30:21] com.bjpowernode.dao.IStudentDao.selectStudentById 159 &lt;==      Total: 1
Student [id=20, name=zhangsan2, age=24, score=1.0]
[DEBUG][2018-05-13 10:30:21] com.bjpowernode.dao.IStudentDao 62 Cache Hit Ratio [com.bjpowernode.dao.IStudentDao]: 0.5
Student [id=20, name=zhangsan2, age=24, score=1.0]
</code></pre><p>sql语句也只执行了一次，说明了第二次读取数据是从二级缓存中读取的。</p>
<p>缓存命中率</p>
<pre><code>Cache Hit Ratio [com.bjpowernode.dao.IStudentDao]: 0.5
</code></pre><h4 id="7-6-二级缓存-增删改对二级缓存的影响"><a href="#7-6-二级缓存-增删改对二级缓存的影响" class="headerlink" title="7.6 二级缓存 - 增删改对二级缓存的影响"></a>7.6 二级缓存 - 增删改对二级缓存的影响</h4><p>1、增、删、改同样也会清空二级缓存</p>
<p>2、对于二级缓存的清空，实质上是对所查找key对应的value置为null，而并非将<key,value>对，即Entry对象删除。</key,value></p>
<p>3、从DB中进行select查询的条件是：</p>
<ul>
<li>缓存中根本就不存在key</li>
<li>缓存中存在该key所对应的Entry对象，但其value为null</li>
</ul>
<h4 id="7-7-二级缓存-内置二级缓存的配置"><a href="#7-7-二级缓存-内置二级缓存的配置" class="headerlink" title="7.7 二级缓存 - 内置二级缓存的配置"></a>7.7 二级缓存 - 内置二级缓存的配置</h4><pre><code>&lt;cache eviction=&quot;FIFO&quot; flushInterval=&quot;10800000&quot; readOnly=&quot;true&quot; size=&quot;512&quot; /&gt;
</code></pre><p><strong>eviction:</strong> 逐出策略。当二级缓存中的对象达到最大值时，就需要通过逐出策略将缓存中的对象移出缓存。默认为LRU。常用策略有：</p>
<ul>
<li><p>FIFO：First In First Out，先进先出。</p>
</li>
<li><p>LRU：Least Recently Used：未被使用时间最长的。</p>
</li>
</ul>
<p><strong>flushInterval:</strong> 刷新缓存的时间间隔，单位毫秒。即清空缓存间隔时间，一般不指定，即当执行增、删、改时刷新缓存。</p>
<p><strong>readOnly:</strong> 设置缓存中数据是否只读。只读的缓存会给所有调用者返回缓存对象的相同实例，因此这些对象是不能被修改的，这提供了很重要的性能优势。但读写的缓存会返回缓存对象的拷贝，速度会慢一些，但是安全，因此默认是false。</p>
<p><strong>flushInterval:</strong> 二级缓存中可以存放的最多对象个数。默认是1024个。</p>
<h4 id="7-8-二级缓存-二级缓存的关闭"><a href="#7-8-二级缓存-二级缓存的关闭" class="headerlink" title="7.8 二级缓存 - 二级缓存的关闭"></a>7.8 二级缓存 - 二级缓存的关闭</h4><p>全局关闭</p>
<pre><code>&lt;configuration&gt;
    &lt;!-- 注册DB连接四要素属性文件 --&gt;
    &lt;properties resource=&quot;jdbc_mysql.properties&quot;&gt;&lt;/properties&gt;

    &lt;settings&gt;
        &lt;!-- 关闭二级缓存 --&gt;
        &lt;setting name=&quot;cacheEnabled&quot; value=&quot;false&quot;/&gt;
    &lt;/settings&gt;

    ...

&lt;/configuration&gt; 
</code></pre><p>局部关闭</p>
<pre><code>&lt;mapper namespace=&quot;com.bjpowernode.dao.IStudentDao&quot;&gt;

    &lt;cache /&gt;

    &lt;select id=&quot;selectStudentById&quot; useCache=&quot;false&quot; resultType=&quot;Student&quot;&gt;
        select id,name,age,score 
        from students 
        where id=#{xxx}
    &lt;/select&gt;
    ...
&lt;/mapper&gt;
</code></pre><h4 id="7-9-二级缓存-使用原则"><a href="#7-9-二级缓存-使用原则" class="headerlink" title="7.9 二级缓存 - 使用原则"></a>7.9 二级缓存 - 使用原则</h4><p>#####（1）、多个namespace不要操作同一张表</p>
<p>由于二级缓存中的数据是基于namespace的，即不同的namespace中的数据互不干扰。若某个用户在某个namespace下对表执行了增删改操作，该操作只会引发当前namespace下的二级缓存的刷新，而对其它namespace下的二级缓存没有影响。这样的话，其它二级缓存中的数据依然是未更新的数据，也就出现了多个namespace中的数据不一致的现象。</p>
<h5 id="（2）、不要在关联关系表上执行增删改操作"><a href="#（2）、不要在关联关系表上执行增删改操作" class="headerlink" title="（2）、不要在关联关系表上执行增删改操作"></a>（2）、不要在关联关系表上执行增删改操作</h5><p>一个namespace一般是对同一个表进行操作，若表间存在关联关系，也就意味着同一个表可能就会出现在多个namespace中。</p>
<h5 id="（3）、查询多于修改时使用二级缓存"><a href="#（3）、查询多于修改时使用二级缓存" class="headerlink" title="（3）、查询多于修改时使用二级缓存"></a>（3）、查询多于修改时使用二级缓存</h5><p>在查询操作远多于增删改操作的情况下可以使用二级缓存。因为任何增删改操作都将刷新二级缓存，对二级缓存的频繁刷新将降低系统性能。</p>
<h4 id="7-10-二级缓存-ehCache"><a href="#7-10-二级缓存-ehCache" class="headerlink" title="7.10 二级缓存 - ehCache"></a>7.10 二级缓存 - ehCache</h4><p>mybatis的特长是sql操作，缓存数据管理不是其特长，为了提高缓存性能，mybatis允许使用第三方缓存产品。ecCache就是其中的一种。</p>
<p>注意，使用ehCache二级缓存，实体类无需实现序列化接口。</p>
<p>两个jar包：</p>
<p>一个是ehCache的核心jar包，一个是整合jar包。</p>
<p>下载地址：<a href="https://github.com/mybatis/ehcache-cache/releases" target="_blank" rel="external">https://github.com/mybatis/ehcache-cache/releases</a></p>
<h4 id="7-11-二级缓存-ehCache-开启"><a href="#7-11-二级缓存-ehCache-开启" class="headerlink" title="7.11 二级缓存 - ehCache - 开启"></a>7.11 二级缓存 - ehCache - 开启</h4><p>（1）、导入jar包</p>
<p>（2）、映射文件</p>
<pre><code>&lt;mapper namespace=&quot;com.bjpowernode.dao.IStudentDao&quot;&gt;

    &lt;cache type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot; /&gt;
    ...
&lt;/mapper&gt;     
</code></pre><p>（3）、ehcache.xml</p>
<pre><code>&lt;defaultCache
        maxElementsInMemory=&quot;10000&quot;
        eternal=&quot;false&quot;
        timeToIdleSeconds=&quot;120&quot;
        timeToLiveSeconds=&quot;120&quot;
        maxElementsOnDisk=&quot;10000000&quot;
        diskExpiryThreadIntervalSeconds=&quot;120&quot;
        memoryStoreEvictionPolicy=&quot;LRU&quot;&gt;
    &lt;persistence strategy=&quot;localTempSwap&quot;/&gt;
&lt;/defaultCache&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/13/java/mybatis/mybatis-7/" data-id="cji15cnue005wu0fyx03zieiu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mybatis/">mybatis</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java/mybatis/mybatis-6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/12/java/mybatis/mybatis-6/" class="article-date">
  <time datetime="2018-05-12T11:19:53.000Z" itemprop="datePublished">2018-05-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mybatis/">mybatis</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/12/java/mybatis/mybatis-6/">第六章 MyBatis - 延迟加载</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="6-1-延迟加载"><a href="#6-1-延迟加载" class="headerlink" title="6.1 延迟加载"></a>6.1 延迟加载</h4><p>MyBatis中的延迟加载，也称为懒加载，是指在进行<strong>关联查询</strong>时，按照设置的延迟规则推迟对关联对象的select查询。延迟加载可以有效的减少数据库压力。</p>
<p>需要注意的是，MyBatis的延迟加载只是对关联对象的查询有延迟设置，对于主加载对象都是直接执行查询语句的。</p>
<h4 id="6-2-关联对象加载时机"><a href="#6-2-关联对象加载时机" class="headerlink" title="6.2 关联对象加载时机"></a>6.2 关联对象加载时机</h4><p>MyBatis根据对关联对象查询的select语句的执行时机，分为三种类型：直接加载、侵入式延迟加载与深度延迟加载。</p>
<p><strong>直接加载：</strong> 执行完对主加载对象的select语句，马上执行对关联对象的select查询。</p>
<p><strong>侵入式延迟：</strong> 执行完对主加载对象的查询时，不会执行对关联对象的select查询。但当要访问主加载对象的详情时，就会马上执行关联对象的select查询。即对关联对象的查询执行，侵入到了主加载对象的详情访问中。也可以这样理解：将关联对象的详情侵入到了主加载对象的详情中，即将关联对象的详情作为主加载对象的详情的一部分出现了。</p>
<p><strong>深度延迟：</strong> 执行对主加载对象的查询时，不会执行对关联对象的查询。访问主加载对象的详情时也不会执行关联对象的select查询。只有当真正访问关联对象的详情时，才会执行对关联对象的select查询。</p>
<p>需要注意的是，延迟加载的应用要求，关联对象的查询与主加载对象的查询必须是分别进行的select语句，不能使用多表连接所进行的查询。因为，多表连接查询，其实质是对一张表的查询，对由多个表连接后形成的一张表的查询。会一次性将多张表的所有信息查询出来。</p>
<p>MyBatis中对于延迟加载设置，可以应用到一对一、一对多、多对一、多对多的所有关联关系查询中。</p>
<h4 id="6-3-懒加载配置"><a href="#6-3-懒加载配置" class="headerlink" title="6.3 懒加载配置"></a>6.3 懒加载配置</h4><p>主配置文件：mybatis.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE configuration
PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;

&lt;configuration&gt;
    &lt;!-- 注册DB连接四要素属性文件 --&gt;
    &lt;properties resource=&quot;jdbc_mysql.properties&quot;&gt;&lt;/properties&gt;

    &lt;!-- 设置整个应用所使用的常量 --&gt;
    &lt;settings&gt;
        &lt;!-- 懒加载总开关 --&gt;
        &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;
        &lt;!-- 侵入式延迟，默认值为true
            执行主加载对象的查询时dao.selectCountryById(2)，不会执行关联对象的查询。
            但是当访问主加载对象的详情时System.out.println(country.getCname())，就会马上执行关联对象的查询。
         --&gt;
        &lt;setting name=&quot;aggressiveLazyLoading&quot; value=&quot;false&quot;/&gt;
        &lt;!-- 深度延迟 ：将侵入式延迟开关关闭
            执行对主加载对象的查询时dao.selectCountryById(2)，不会执行关联对象的查询。
            访问主加载对象的详情时System.out.println(country.getCname())，也不会执行关联对象的查询。
            只有当访问关联对象的详情时System.out.println(ministers.size())，才会执行关联查询。
        --&gt;
    &lt;/settings&gt;

    &lt;!-- 设置别名 --&gt;
    &lt;typeAliases&gt;
        &lt;!-- 将指定包中所有类的简单类名当作别名 --&gt;
        &lt;package name=&quot;com.bjpowernode.beans&quot;/&gt;
    &lt;/typeAliases&gt;

    &lt;!-- 配置运行环境 --&gt;
    &lt;environments default=&quot;mysqlEM&quot;&gt;
        &lt;environment id=&quot;mysqlEM&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;${jdbc.driver}&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;${jdbc.user}&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;

    &lt;!-- 注册映射文件 --&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;com/bjpowernode/dao/mapper.xml&quot; /&gt;    
    &lt;/mappers&gt;

&lt;/configuration&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/12/java/mybatis/mybatis-6/" data-id="cji15cnub005tu0fyy8e3gbv3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mybatis/">mybatis</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angularjs/">angularjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/bootstrap/">bootstrap</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/github/">github</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/maven/">maven</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mybatis/">mybatis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">spring</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/springmvc/">springmvc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ssm/">ssm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/转载/">转载</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/">IO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bootstrap/">bootstrap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/collecionsFramework/">collecionsFramework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css-grid/">css-grid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jsp/">jsp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/">mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reflect/">reflect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/regex/">regex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servlet/">servlet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/session-cookie/">session cookie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springmvc/">springmvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssm/">ssm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thread/">thread</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/足球/">足球</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/IO/" style="font-size: 20px;">IO</a> <a href="/tags/angular/" style="font-size: 17.14px;">angular</a> <a href="/tags/api/" style="font-size: 14.29px;">api</a> <a href="/tags/bootstrap/" style="font-size: 10px;">bootstrap</a> <a href="/tags/collecionsFramework/" style="font-size: 15.71px;">collecionsFramework</a> <a href="/tags/css-grid/" style="font-size: 10px;">css-grid</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/jsp/" style="font-size: 12.86px;">jsp</a> <a href="/tags/maven/" style="font-size: 12.86px;">maven</a> <a href="/tags/mybatis/" style="font-size: 17.14px;">mybatis</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/reflect/" style="font-size: 10px;">reflect</a> <a href="/tags/regex/" style="font-size: 10px;">regex</a> <a href="/tags/servlet/" style="font-size: 11.43px;">servlet</a> <a href="/tags/session-cookie/" style="font-size: 10px;">session cookie</a> <a href="/tags/spring/" style="font-size: 18.57px;">spring</a> <a href="/tags/springmvc/" style="font-size: 14.29px;">springmvc</a> <a href="/tags/ssm/" style="font-size: 10px;">ssm</a> <a href="/tags/thread/" style="font-size: 11.43px;">thread</a> <a href="/tags/足球/" style="font-size: 10px;">足球</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/06/05/java/maven/maven-3/">第三章 maven拆分ssm</a>
          </li>
        
          <li>
            <a href="/2018/06/03/java/maven/maven-2/">第二章 maven整合smm</a>
          </li>
        
          <li>
            <a href="/2018/06/01/java/maven/maven-1/">第一章 maven管理工具</a>
          </li>
        
          <li>
            <a href="/2018/05/26/java/ssm/ssm-1/">第一章 搭建SSM开发环境</a>
          </li>
        
          <li>
            <a href="/2018/05/24/java/springmvc/springmvc-4/">第四章 springmvc核心技术</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>